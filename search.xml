<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ÈÄöËøáHttpServletResponseÂÆûÁé∞ÊµèËßàÂô®Êñá‰ª∂‰∏ãËΩΩÂèäÂùëÁÇπ‰ªãÁªç]]></title>
    <url>%2F2018%2F10%2F20%2FhttpServletResponseDownloadFile%2F</url>
    <content type="text"><![CDATA[ÂäüËÉΩÊúÄËøëÂú®ÂÅö‰∏Ä‰∏™ÈúÄÊ±Ç‚Äî‚Äî‚Äî‚ÄîÈÄöËøá‰∏Ä‰∏™ControllerÂ∞ÜÁõ∏ÂÖ≥Êï∞ÊçÆËΩ¨ÊàêcsvÊñá‰ª∂ÂêéÁõ¥Êé•ËÆ©ÊµèËßàÂô®‰∏ãËΩΩ„ÄÇÊÄùË∑ØÂë¢ÔºåÊØîËæÉÊ∏ÖÊô∞Ôºå‰∏ªË¶ÅÁöÑÊµÅÁ®ãÂ¶Ç‰∏ãÔºö1. ËÆæÁΩÆÂìçÂ∫îÁöÑContentTypeÁ±ªÂûã2. ËÆæÁΩÆÂìçÂ∫îÂ§¥3. ÈÄöËøáhttpServletResponseËé∑ÂèñServletOutputStreamÂØπË±°4. Â∞ÜÈúÄË¶ÅÁöÑÊï∞ÊçÆÂÜôÂà∞ËæìÂá∫ÊµÅ‰∏≠ ËøôÈáåÁªôÂá∫Á§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334/** * ‰∏ãËΩΩÊï∞ÊçÆ */ @RequestMapping("/downloadCSVFile") public void downloadCSVFile(HttpServletResponse httpServletResponse) &#123; try &#123; // ËÆæÁΩÆContentType httpServletResponse.setContentType("application/x-download;charset=utf-8"); // ËÆæÁΩÆÊñá‰ª∂ÂêçÔºåÂπ∂ÊåáÂÆöÁºñÁ†ÅÊ†ºÂºè String fileName = URLEncoder.encode("download_records_" + System.currentTimeMillis() / 1000 +".csv", "UTF-8"); httpServletResponse.setCharacterEncoding("UTF-8"); // Â∞ÜÊñá‰ª∂ÂêçaddHeader httpServletResponse.setHeader("content-disposition", "attachment;filename=" + fileName); String message = "test"; InputStream stream = new ByteArrayInputStream(message.getBytes("UTF-8")); OutputStream out = httpServletResponse.getOutputStream(); byte buff[] = new byte[1024]; int len = 0; while ((len = stream.read(buff)) &gt; 0) &#123; out.write(buff, 0, len); &#125; out.flush(); out.close(); stream.close(); &#125; catch (Exception e) &#123; logger.error("download output error!", e); &#125; &#125; ‰ª£Á†ÅÂæàÁÆÄÂçïÔºåÈ¶ñÂÖàÊàë‰ª¨ËÆæÁΩÆ‰∫ÜhttpServletResponseÁöÑContentType‰∏∫application/x-downloadÔºåÁî®‰∫éË°®Èù¢Êàë‰ª¨Ë¶Å‰º†ËæìÂ∫îÁî®Á®ãÂ∫èÊï∞ÊçÆÊàñËÄÖ‰∫åËøõÂà∂Êï∞ÊçÆ„ÄÇÈöèÂêéËÆæÁΩÆresponseÁöÑÂ§¥‰∏∫content-disposition„ÄÇcontent-dispositionÁî®Êù•ÂØπÊä•Êñá‰ΩìËøõË°åÊèèËø∞ÔºåËßÑÂÆö‰∫ÜÂÆ¢Êà∑Á´ØÁöÑÊòæÁ§∫Â§ÑÁêÜË°å‰∏∫ÔºõÊúâ‰∏§ÁßçÂèñÂÄºÔºöattachmentÂíåinlineÔºåÂàÜÂà´Ë°®Á§∫‰øùÂ≠òÂíåÁõ¥Êé•ÊòæÁ§∫„ÄÇÂπ∂‰∏îÊàë‰ª¨ËÆæÁΩÆ‰∫ÜÊñá‰ª∂ÂêçÂèä‰øùÂ≠òÁöÑÊ†ºÂºèÁÑ∂ÂêéÂ∞ÜÊàë‰ª¨ÈúÄË¶ÅÁöÑÊï∞ÊçÆÈÄöËøáÂÜôÂÖ•httpServletResponse‰∏≠ÂÆåÊàêÊàë‰ª¨ÈúÄË¶ÅÁöÑÂäüËÉΩ„ÄÇ ÂΩìÊàë‰ª¨ÈÉ®ÁΩ≤Â•Ω‰ª•ÂêéÔºåËÆøÈóÆcontrollerÁöÑÂüüÂêçÂç≥ÂèØÂÆåÊàê‰∏ãËΩΩ„ÄÇ Â•Ω‰∫ÜÔºåÊàëÁü•ÈÅìËøô‰πàÂ∞ùËØïÁöÑÂêåÂ≠¶ÈÉΩËÉΩÈ°∫Âà©ÊàêÂäüÁöÑ„ÄÇ ÈÇ£‰πàÊàëÊÉ≥ËØ¥ÁöÑÈóÆÈ¢òÊòØ‰ªÄ‰πàÔºüÈóÆÈ¢òÊòØÂΩìÈÄöËøáÂâçÁ´ØÁöÑÈ°µÈù¢ËøõË°å‰∏ãËΩΩÊó∂‰∏ç‰ºöÂá∫Áé∞Êñá‰ª∂‰∏ãËΩΩÔºåÂè™‰ºöÂú®ÂâçÁ´ØÁöÑresponse‰∏≠ÊòæÁ§∫Êàë‰º†ËæìÁöÑÂÜÖÂÆπÔºõËÄåÁõ¥Êé•ÈÄöËøáÁΩëÈ°µËÆøÈóÆÈ°µÈù¢ÊòØÂèØ‰ª•Ê≠£Â∏∏‰∏ãËΩΩÁöÑÔºÅ ÈóÆÈ¢òÁöÑÂéüÂõ†‰∏éËß£ÂÜ≥ÊñπÊ°àÂéüÂõ†‰∏ÄÂºÄÂßãÊâæÂéüÂõ†ÊòØÊûÅÂÖ∂ÈöæÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨Ê†πÊú¨‰∏çÁü•ÈÅìÂâçÁ´ØÂì™ÈáåÂá∫‰∫ÜÈóÆÈ¢ò„ÄÇÂêéÊù•Âú®‰∏ÄÁØáÊñáÁ´†‰∏≠ÔºàJavascript/jqueryÈÄöËøáPOSTÁî®JSONÊï∞ÊçÆ‰∏ãËΩΩÊñá‰ª∂ÔºâÊé®Êµã‰∫ÜÂéüÂõ†ÔºöÂâçÁ´ØÂú®ËØ∑Ê±ÇÊó∂ÂÄüÁî®‰∫ÜajaxÊù•ËøõË°å„ÄÇ‰ΩÜÊòØajaxÊòØ‰∏çÁõ¥Êé•ÊîØÊåÅ‰∏ãËΩΩÊñá‰ª∂ÁöÑÔºåÊç¢ËÄåË®Ä‰πãÔºå‰∏çËÉΩÁõ¥Êé•ÈÄöËøáÂêëhttpServletResponseÂÜôÊñá‰ª∂ÊµÅÂπ∂ÈÄöËøáajax‰∏ãËΩΩÔºÅajaxÊîØÊåÅÁöÑdataTypeÂè™ÊúâÂ¶Ç‰∏ãÂá†Áßç:Ôºöxml„ÄÅhtml„ÄÅscript„ÄÅjson„ÄÅjsonpÂíåtext„ÄÇÊúâ‰∫ÜÂ¶Ç‰∏ãÊé®ÊµãÔºåÁõ¥Êé•ËÅîÁ≥ªÂâçÁ´ØÂêåÂ≠¶ÔºåÈóÆÂ•πÔºàÂØπÁöÑÔºåÊòØ‰∏™Â¶πÂ≠êÂë¢ÔºåÂâçÁ´ØÂ∞±ÊòØÂ¶πÂ≠êÂ§öÔºâÊòØ‰∏çÊòØÁî®‰∫ÜajaxÔºå‰∏ÄË¥¥‰ª£Á†ÅÔºåÊûúÁÑ∂Â¶ÇÊ≠§ÔΩû Ëß£ÂÜ≥ÊñπÊ°àËÆ©ÂâçÁ´Ø‰∏çË¶ÅÈÄöËøáajaxËØ∑Ê±ÇÂ∞±Â•Ω‰∫ÜÔΩûso easyÔΩû okÔºÅdoneÔºÅ]]></content>
      <tags>
        <tag>HttpServletResponse</tag>
        <tag>Êñá‰ª∂</tag>
        <tag>‰∏ãËΩΩ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈÄöËøáApacheÁöÑHttpÊ°ÜÊû∂‰ª•"application/x-www-form-urlencoded"ÂΩ¢ÂºèpostÊï∞ÊçÆÁöÑ‰∏§ÁßçÊñπÂºè]]></title>
    <url>%2F2018%2F10%2F13%2FhttpPostDataTranser%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãÊúÄËøë‰∏éÁ¨¨‰∏âÊñπÂÖ¨Âè∏‰Ωú‰∏öÂä°ÂØπÊé•Êó∂ÔºåÈúÄË¶ÅÊàëÊñπÂ∞ÜÊï∞ÊçÆÈÄöËøáhttpËØ∑Ê±ÇÁöÑÊñπÂºè‰º†ËæìÂà∞ÂØπÊñπÊé•Âè£ÔºåÊàëÊñπ‰∏ÄÁõ¥ÈÄöËøáÂ∞ÜÂØπÂ∫îÁöÑÊï∞ÊçÆÂØπË±°‰ª•‚Äújson‚ÄùÁöÑÊ†ºÂºèÊîæÂú®httpËØ∑Ê±Ç‰Ωì‰∏≠„ÄÇËÅîË∞ÉÂêéÂØπÊñπË°®Á§∫‰∏ÄÁõ¥ËØª‰∏çÂà∞Êï∞ÊçÆ„ÄÇÁªèËøáÂæàÂ§öÊñπÂºèÁöÑÊé¢Á¥¢ÂêéÂèëÁé∞ÔºåÂØπÈù¢ÊòØÁî®‚Äúkey-value‚ÄùÁöÑÊñπÂºèÂú®ËØªÂèñÊï∞ÊçÆÔºåÊÄ™‰∏çÂæóÊãø‰∏çÂà∞Êï∞ÊçÆÔºÅÂõ†‰∏∫Êàë‰ª¨ÁöÑhttpËØ∑Ê±ÇÈÉΩÊòØÈÄöËøáApacheÁöÑHttpÊ°ÜÊû∂Êù•Âª∫Á´ãÁöÑÔºåÊé•‰∏ãÈáåÊàëÂ∞±ÁÆÄÂçï‰ªãÁªç‰∏ãÈÄöËøáApacheÁöÑHttpÊ°ÜÊû∂Ôºå‰ª•‚Äùapplication/x-www-form-urlencoded‚ÄùÂΩ¢ÂºèpostÊï∞ÊçÆÁöÑ‰∏§ÁßçÊñπÂºè„ÄÇ ËøôÈáåÁªôÂá∫Á§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ãÔºö ‰∏§ÁßçÊñπÊ°à1. Êï∞ÊçÆ‰ª•‚Äùjson‚ÄùÊ†ºÂºè‰º†Ëæì‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456// Âª∫Á´ãHttpPostÂØπË±°HttpPost postReq = new HttpPost(url);// ËÆæÁΩÆÈÄöËøácontentTypeÂíåËØ∑Ê±ÇÊï∞ÊçÆÊù•Âª∫Á´ãËØ∑Ê±Ç‰ΩìStringEntity entity = new StringEntity(data, ContentType.create("application/x-www-form-urlencoded", characterSet));postReq.setEntity(entity);// ‰ª•‰∏ã‰∏∫httpËØ∑Ê±ÇÁöÑÂÖ∂‰ªñÈÖçÁΩÆËÆæÁΩÆÁ≠â 2. Êï∞ÊçÆ‰ª•‚Äùkey-value‚ÄùÂΩ¢Âºè‰º†ËæìÈîÆÂÄºÂØπÁöÑÂ≠òÊîæÈúÄË¶ÅÈÄöËøáBasicNameValuePairÂØπË±°Êù•ÂÆûÁé∞ ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314// Âª∫Á´ãHttpPostÂØπË±°HttpPost postReq = new HttpPost(url);// Âª∫Á´ã‰∏Ä‰∏™mapÊù•Â≠òÊîæ"key-value"ÂØπMap&lt;String,String&gt; parameters =JSON.parseObject(data, Map.class);// Êñ∞Âª∫NameValuePairÂàóË°®ÔºåÁî®Êù•Â≠òÊîæÈîÆÂÄºÂØπList&lt;NameValuePair&gt; NameValuePairList = new ArrayList&lt;NameValuePair&gt;();for (String key : parameters.keySet()) &#123; NameValuePairList(new BasicNameValuePair(key, parameters.get(key)));&#125;// ÈÄöËøáUrlEncodedFormEntityÂ∞ÜNameValuePairListËøõË°åÊ†ºÂºèÂåñÂêéÊîæÂÖ•ËØ∑Ê±Ç‰Ωì‰∏≠postReq.setEntity(new UrlEncodedFormEntity(NameValuePairList, characterSet));// ËÆæÁΩÆcontentTypepostReq.setHeader("Content-Type", "application/x-www-form-urlencoded");// ‰ª•‰∏ã‰∏∫httpËØ∑Ê±ÇÁöÑÂÖ∂‰ªñÈÖçÁΩÆËÆæÁΩÆÁ≠â okÔºÅdoneÔºÅ]]></content>
      <tags>
        <tag>Apache</tag>
        <tag>Http</tag>
        <tag>post</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java Arraylist addÊñπÊ≥ïÁöÑjava.lang.UnsupportedOperationExceptionÂºÇÂ∏∏]]></title>
    <url>%2F2018%2F10%2F01%2FArraysException%2F</url>
    <content type="text"><![CDATA[ÈóÆÈ¢òÊúÄËøëÂú®ÂØπlistËøõË°åcodeÁöÑÊó∂ÂÄôÊäõÂá∫‰∫Üjava.lang.UnsupportedOperationExceptionÂºÇÂ∏∏Ôºå‰∏îÁúã‰ª£Á†ÅÔºö 12345678910111213141516171819202122232425262728293031public class BlogCaseTest &#123; private static Map&lt;String, List&lt;String&gt;&gt; cityMap = new HashMap&lt;&gt;(); public static void main(String[] args) &#123; String[] provinceString = &#123;"zhejiang", "zhejiang", "shanghai", "sichuan"&#125;; String[] cityString = &#123;"hangzhou", "jiaxing", "shanghai", "chengdu"&#125;; for (int i = 0; i &lt; provinceString.length; i++) &#123; cityMapInitialize(provinceString[i], cityString[i]); &#125; &#125; private static void cityMapInitialize(String province, String city) &#123; if (StringUtils.isEmpty(province) || StringUtils.isEmpty(city)) &#123; System.out.println("illegal input province or city"); return; &#125; try &#123; if (!CollectionUtils.isEmpty(cityMap.get(province))) &#123; List&lt;String&gt; cityList = cityMap.get(province); cityList.add(city); &#125; else &#123; List&lt;String&gt; cityList = Arrays.asList(city); cityMap.put(province, cityList); &#125; System.out.println("province: " + province + " city: " + city); &#125; catch (Exception e) &#123; System.out.println("province: " + province + " city: " + city + " cityMapInitialize exception! " + e); &#125; &#125;&#125; ‰ª£Á†ÅÂæàÁÆÄÂçïÔºåÈ¶ñÂÖàÂÆö‰πâ‰∏Ä‰∏™cityMapÁî®Êù•Â≠òÂÇ®‚ÄúÁúÅ‰ªΩ-ÂüéÂ∏Ç‚ÄùÁöÑÊò†Â∞ÑÔºåcityMapInitializeÊñπÊ≥ïÁî®Êù•ÂØπcityMapËøõË°åÂàùÂßãÂåñÊàñËÄÖËØ¥ËµãÂÄºÔºåÊâßË°åmainÂáΩÊï∞ÂêéÔºåÊéßÂà∂Âè∞ËæìÂá∫Â¶Ç‰∏ãÔºö 1234province: zhejiang city: hangzhouprovince: zhejiang city: jiaxing cityMapInitialize exception! java.lang.UnsupportedOperationExceptionprovince: shanghai city: shanghaiprovince: sichuan city: chengdu ÂèØ‰ª•ÁúãÂà∞ÂΩìÊâßË°åÂà∞‚Äúzhejiang-jiaxing‚ÄùÁöÑÊó∂ÂÄôÔºåÊäõÂá∫‰∫ÜÂºÇÂ∏∏ ÂéüÂõ†‰∏éËß£ÂÜ≥ÊñπÊ°àÂéüÂõ†ÂéüÂõ†ÂæàÁÆÄÂçïÔºåËØ∑ÁúãÁ¨¨19-25Ë°å‰ª£Á†ÅÔºö1234567if (!CollectionUtils.isEmpty(cityMap.get(province))) &#123; List&lt;String&gt; cityList = cityMap.get(province); cityList.add(city); &#125; else &#123; List&lt;String&gt; cityList = Arrays.asList(city); cityMap.put(province, cityList); &#125; ÂΩìcityMap‰∏≠Ê≤°ÊúâÂØπÂ∫îÁöÑprovinceÊó∂ÔºåÊàë‰ª¨ÂÖàÈÄöËøáArrays.asListÊù•Êñ∞Âª∫‰∏Ä‰∏™listÂπ∂putÂà∞cityMap‰∏≠ÔºåËÄåÂΩìcityMap‰∏≠Â∑≤ÁªèÂ≠òÂú®Ê≠§provinceÁöÑÊò†Â∞ÑÊó∂ÔºåÂ∞±‰ºöÂèñÂá∫provinceÂØπÂ∫îÁöÑlistÔºåÂπ∂Â∞ÜÊ≠§Êó∂ÁöÑcityÂä†ÂÖ•Âà∞list‰∏≠„ÄÇÈÇ£‰πàÔºåÈóÆÈ¢òÂ∞±Êù•‰∫Ü‚Äî‚Äî‚Äî‚ÄîÈÄöËøáArrays.asListÂàõÂª∫ÁöÑlistÊòØÂõ∫ÂÆöÂ§ßÂ∞èÁöÑArrayList„ÄÇËØ∑ÁúãArrays‰∏≠asListÁöÑÊ∫êÁ†ÅÔºö 12345678910111213141516171819202122/** * Returns a fixed-size list backed by the specified array. (Changes to * the returned list "write through" to the array.) This method acts * as bridge between array-based and collection-based APIs, in * combination with &#123;@link Collection#toArray&#125;. The returned list is * serializable and implements &#123;@link RandomAccess&#125;. * * &lt;p&gt;This method also provides a convenient way to create a fixed-size * list initialized to contain several elements: * &lt;pre&gt; * List&amp;lt;String&amp;gt; stooges = Arrays.asList("Larry", "Moe", "Curly"); * &lt;/pre&gt; * * @param &lt;T&gt; the class of the objects in the array * @param a the array by which the list will be backed * @return a list view of the specified array */ @SafeVarargs @SuppressWarnings("varargs") public static &lt;T&gt; List&lt;T&gt; asList(T... a) &#123; return new ArrayList&lt;&gt;(a); &#125; Ëß£ÂÜ≥ÊñπÊ°àÂæàÁÆÄÂçïÔºåÂàõÂª∫ÂàùÂßãÁöÑlistÊó∂Ôºå‰∏çË¶ÅÂàõÂª∫Â¶Ç‰∏äÊâÄËø∞ÁöÑÂõ∫ÂÆöÂ§ßÂ∞èÁöÑArrayList„ÄÇÂ¶Ç‰∏ãÔºö 12345678if (!CollectionUtils.isEmpty(cityMap.get(province))) &#123; List&lt;String&gt; cityList = cityMap.get(province); cityList.add(city); &#125; else &#123; List&lt;String&gt; cityList = new ArrayList&lt;&gt;(); cityList.add(city); cityMap.put(province, cityList); &#125; okÔºÅdoneÔºÅ]]></content>
      <tags>
        <tag>Java</tag>
        <tag>ÂºÇÂ∏∏</tag>
        <tag>List</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[BASE64ÁºñÁ†ÅÁªìÊûúÂ≠òÂú®‚ÄúÊç¢Ë°åÁ¨¶‚ÄùÂèäËß£ÂÜ≥ÊñπÊ°à]]></title>
    <url>%2F2018%2F09%2F18%2FBASE64encode%2F</url>
    <content type="text"><![CDATA[ÈóÆÈ¢ò‰ªäÂ§©‰∏éÁ¨¨‰∏âÊñπÊúçÂä°Âô®ËøõË°åhttpËØ∑Ê±Ç‰∫§‰∫íÊó∂ÔºåÂèëÁé∞‰º†ÂÖ•ÁöÑsignature‰∏éÊúçÂä°Âô®signatureÂØπ‰∏ç‰∏äÂØºËá¥ËØ∑Ê±ÇÂ§±Ë¥•„ÄÇÂêéÂèëÁé∞ÊòØÂú®Ë∞ÉÁî®sun.miscÂåÖ‰∏ãÁöÑBASE64Encoder().encode()ÊñπÊ≥ïÂØπÂ≠óÁ¨¶‰∏≤‚Äúcontent‚ÄùËøõË°åÁºñÁ†ÅÊó∂ÔºåÁºñÁ†ÅÁªìÊûú‰∏éÊúçÂä°Âô®ÁöÑÊ†áÂáÜÂÄºÂØπ‰∏ç‰∏ä„ÄÇË∞ÉËØïÂêéÂèëÁé∞Êú¨Âú∞ÁºñÁ†ÅÁªìÊûú‰∏≠Ëé´ÂêçÂÖ∂Â¶ôÊ∑∑ÂÖ•‰∫ÜÂæàÂ§ö‚ÄúÊç¢Ë°åÁ¨¶‚ÄùÔºà\tÔºâÔºö 12345671iIiwiU2VuZGVyQWRkcmVzcyI6Iua1i+ivleWcsOWdgCIsIlNlbmRlck5hbWUiOiLlvKDkuIkiLCJSZWNlaXZlclByb3ZpbmNlIjoi5rGf6IuPIiwiU291cmNlSWQiOiIxMjM0NTYiLCJTZW5kZXJEaXN0cmljdCI6Iuemj+eUsOWMuiIsIlJlY2VpdmVyTW9iaWxlIjoiMTUyOTk5OTk5OTkiLCJTZW5kZXJQcm92aW5jZSI6IuW5v+S4nCIsIlJlY2VpdmVyRGlzdHJpY3QiOiLlp5Hoi4/ljLoiLCJSZWNlaXZlckNpdHkiOiLoi4/lt57luIIiLCJSZWNlaXZlck5hbWUiOiLlvKDkuIkiLCJTZW5kZXJNb2JpbGUiOiIxNTE4ODg4ODg4OCIsIlNlbmRlckNpdHkiOiLmt7HlnLPluIIifQ== ÂéüÂõ†‰∏éËß£ÂÜ≥ÊñπÊ°àÂéüÂõ†Êü•ËØ¢‰∫ÜÂèëÁé∞Âú®RFC2045‰∏≠ÊúâËøô‰πà‰∏ÄÊÆµËßÑÂÆöÔºö 1REQUIRES that encoded lines be no more than 76 characters long. If longer lines are to be encoded with the Quoted-Printable encoding, &quot;soft&quot; line breaks ÊÑèÊÄùÂ∞±ÊòØÔºöBASE64‰∏ÄË°å‰∏çËÉΩË∂ÖËøá76Â≠óÁ¨¶ÔºåË∂ÖËøáÂ∞±‰ºöÊ∑ªÂä†ÂõûËΩ¶Êç¢Ë°åÁ¨¶„ÄÇÂéüÂõ†Â∞±ÊòØËøôÊ†∑Ôºå‰∏ãÈù¢ÁªôÂá∫Ëß£ÂÜ≥ÊñπÊ°à„ÄÇ Ëß£ÂÜ≥ÊñπÊ°àÂèØ‰ª•ÈÄöËøáÂú®BASE64ÁºñÁ†ÅÁöÑÁªìÊûúÂêéÂä†‰∏ä .replaceAll(‚Äú\r|\n‚Äù, ‚Äú‚Äù) Ëß£ÂÜ≥ okÔºÅdoneÔºÅ]]></content>
      <tags>
        <tag>BASE64</tag>
        <tag>ÁºñÁ†Å</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring‰∏≠Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰∏§ÁßçÊñπÂºè]]></title>
    <url>%2F2018%2F09%2F08%2FspringLoadProperties%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÂú®ÂÆûÈôÖÈ°πÁõÆÂºÄÂèë‰∏≠ÁªèÂ∏∏‰ºöÊ†πÊçÆ‰∏çÂêåÁöÑÁéØÂ¢ÉÔºàdev,pre,onlineÔºâÊù•ÈÖçÁΩÆ‰∏çÂêåÁöÑÁ±ªÊàñÂ±ûÊÄßÔºåÊØîÂ¶ÇËØ¥Ê†πÊçÆ‰∏çÂêåÁöÑÁéØÂ¢ÉÈÖçÁΩÆ‰∏çÂêåÁöÑzookeeperÊàñËÄÖÊï∞ÊçÆÂ∫ìdatasource„ÄÇÊúÄÁÆÄÂçïÁöÑÊó†ÈùûÂ∞±ÊòØÂºÄÂèë‰∫∫ÂëòÊ†πÊçÆ‰∏çÂêåÁöÑÁéØÂ¢É‰∫∫ËÇâÂéª‰øÆÊîπÂØπÂ∫îÁöÑÈÖçÁΩÆÔºåËøôÁßçÊñπÂºèÁÆÄÂçï‰ΩÜÂç¥Ë¥πÊó∂Ôºå‰∏îÂæàÂÆπÊòìÂá∫ÈîôÔºöÊûÅÂÖ∂ÂÆπÊòìÂá∫Áé∞ÈÖçÁΩÆÂÜôÈîôÊàñËÄÖÂøòËÆ∞‰øÆÊîπÂØπÂ∫îÁéØÂ¢ÉÈÖçÁΩÆÁöÑÊÉÖÂÜµ„ÄÇÂØπ‰∫éË¶ÅËß£ÊîæÂèåÊâãÁöÑÁ®ãÂ∫èÂëòÊù•ËØ¥ÔºåËøôÊó†ÁñëÊòØ‰∏ÄÁßçÂæàlowÂèàÂæà‰ΩéÊïàÁöÑÊñπÂºè„ÄÇËøô‰∏™Êó∂ÂÄôÂ∞±ÂèØ‰ª•Áî®springËØªÂèñ‰∏çÂêåÁöÑÁéØÂ¢ÉÈÖçÁΩÆÊñá‰ª∂ÔºàÊØîÂ¶ÇËØ¥zookeeper.propertiesÔºâÔºåÁÑ∂ÂêéÁî®mavenÁöÑÂ§öÁéØÂ¢ÉÊâìÂåÖÁöÑÊñπÊ≥ïÂ∞±ÂèØÂ∞ÜÂØπÂ∫îÁéØÂ¢ÉÁöÑÂ±ûÊÄßÊ≥®ÂÖ•„ÄÇÈÖçÁΩÆÊñá‰ª∂ÁöÑÂ≠òÂú®Ëß£ÂÜ≥‰∫ÜÂæàÂ§ß‰∏Ä‰ªΩÈáçÂ§çÁöÑÂ∑•‰ΩúÔºåÂπ∂‰∏î‰πüÊñπ‰æø‰∫ÜÊàë‰ª¨Áªü‰∏ÄÁÆ°ÁêÜÈÖçÁΩÆ„ÄÇ I. ‰ªãÁªç‰∏§ÁßçËØªÂèñÈÖçÁΩÆÊñá‰ª∂ÁöÑÊñπÊ≥ïÈÇ£‰πàÈ¶ñÂÖàË¶ÅËß£ÂÜ≥ÁöÑÈÄöËøáspringÊù•ËØªÂèñÈÖçÁΩÆÊñá‰ª∂„ÄÇ‰∏ÄËà¨Êúâ‰ª•‰∏ãÂá†ÁßçÊñπÂºèÂèØ‰ª•Êù•ËØªÂèñÈÖçÁΩÆÊñá‰ª∂Ôºö1. ÈÄöËøáxmlÊ≥®ÂÖ•2. ÈÄöËøá@ValueÊ≥®Ëß£Ê≥®ÂÖ• 1. ÈÄöËøáxmlÊ≥®ÂÖ•È¶ñÂÖàÔºåÊàë‰ª¨Êñ∞Âª∫‰∏Ä‰∏™UserÁ±ªÔºö 1234567@Data@ToStringpublic class User &#123; private String name; private String city; private String phone;&#125; @DataÂíå@ToStringÊòØlombokÁöÑÊ≥®Ëß£ÔºåÊòØ‰∏∫‰∫ÜÁúÅÂéªÂÜôgetterÔºåsetterÂèätoStringÊñπÊ≥ïÁöÑÁ•ûÂô®ÔºåÂΩìÁÑ∂ËøòÊúâÂæàÂ§ö‰∫∫ËÆ§‰∏∫lombokÁöÑÊ≥®Ëß£ÊòØÈÇ™Êïô- -ÔºåÂ•ΩÂêßÔºåËøô‰∏çÊòØÂí±‰ª¨‰ªäÂ§©Ë¶ÅËØ¥ÁöÑÈáçÁÇπ ÂèØ‰ª•ÁúãÂà∞UserÁ±ª‰∏≠Â≠òÂú®‰∏â‰∏™ÁßÅÊúâÂèòÈáèÔºåÊàë‰ª¨ÁöÑÁõÆÁöÑÂ∞±ÊòØÈÄöËøáËµÑÊ∫êÊñá‰ª∂‰∏≠ÁöÑÈÖçÁΩÆÊù•Ê≥®ÂÖ•Âà∞Ëøô‰∏â‰∏™ÂèòÈáè‰∏≠ ÈÇ£‰πàÔºåÊàë‰ª¨Êù•Âª∫Á´ã‰∏Ä‰∏™ËµÑÊ∫êÊñá‰ª∂‚Äî‚Äîuser.propertiesÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 1234#useruser.name = $&#123;test.user.name&#125;user.city = $&#123;test.user.city&#125;user.phone = $&#123;test.user.phone&#125; ÂÖ∂‰∏≠Ôºå${test.user.name}„ÄÅ${test.user.city}„ÄÅ${test.user.phone}ÂàÜÂà´ÂØπÂ∫îÁéØÂ¢ÉËµÑÊ∫êÊñá‰ª∂‰∏≠ÁöÑÂ±ûÊÄß„ÄÇÂõ†‰∏∫ÂÆûÈôÖÈ°πÁõÆÂºÄÂèë‰∏≠ÈúÄË¶ÅÊ†πÊçÆ‰∏çÂêåÁöÑÁéØÂ¢ÉÊâìÂåÖ‰∏çÂêåÁöÑÁéØÂ¢ÉËµÑÊ∫êÊñá‰ª∂ÔºåÂõ†Ê≠§‰∏çÂêåÁöÑÁéØÂ¢ÉÈÉΩ‰ºöÂØπÂ∫î‰∏Ä‰ªΩÁéØÂ¢ÉËµÑÊ∫êÊñá‰ª∂Ôºå‰æãÂ¶Çdev_config.propertiesÂØπÂ∫îÁ∫ø‰∏ãÂºÄÂèëÁéØÂ¢ÉÔºåpre_config.propertiesÂØπÂ∫îÈ¢ÑÂèëÁéØÂ¢ÉÔºåonline_config.propertiesÂØπÂ∫îÁ∫ø‰∏äÊ≠£ÂºèÁéØÂ¢É„ÄÇ‰ª•‰∏ãÊàë‰ª¨ÁªôÂá∫Á∫ø‰∏ãÁéØÂ¢ÉÁöÑËµÑÊ∫êÊñá‰ª∂Ôºàdev_config.propertiesÔºâÈÖçÁΩÆÔºö 1234#usertest.user.name = Olivetest.user.city = hangzhoutest.user.phone = 16668815388 ‰∏∫‰∫ÜËÆ©springÂèØ‰ª•Ê≥®ÂÖ•propertiesÊñá‰ª∂‰∏≠ÁöÑÈÖçÁΩÆÔºåÈ¶ñÂÖàÈúÄË¶ÅÂú®xml‰∏≠ÈÖçÁΩÆÊâ´ÊèèÂåÖ‰∏ãÁöÑjavaÊñá‰ª∂Ôºö 1&lt;context:component-scan base-package="com.xxx.xxx.service"/&gt; ÁÑ∂ÂêéÈúÄË¶ÅÂú®springÁöÑxmlÈÖçÁΩÆÊñá‰ª∂‰∏≠Ê∑ªÂä†‰ª•‰∏ã‰∏§‰∏™Á±ªÁöÑÂÆû‰æãÔºåËøô‰∏§‰∏™Á±ªÁî®Êù•Âä†ËΩΩprpertiesÊñá‰ª∂ÔºåËøô‰∏§‰∏™Á±ªÁúüÁöÑÂæàÈáçË¶ÅÔºÅÂ∑≤ÁªèÈÅáÂà∞Êó†Êï∞Ëµ∑Âõ†‰∏∫Ê≤°ÊúâÈÖçÁΩÆËøô‰ø©Á±ªÂØºËá¥ÁöÑÂ§ßÂùëÔºö 12org.springframework.beans.factory.config.PropertiesFactoryBeanorg.springframework.beans.factory.config.PreferencesPlaceholderConfigurer ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö 1234567891011&lt;bean id="configProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean"&gt; &lt;property name="locations"&gt; &lt;list&gt; &lt;value&gt;classpath*:message.properties&lt;/value&gt; &lt;value&gt;classpath*:user.properties&lt;/value&gt; &lt;/list&gt; &lt;/property&gt;&lt;/bean&gt;&lt;bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PreferencesPlaceholderConfigurer"&gt; &lt;property name="properties" ref="configProperties" /&gt;&lt;/bean&gt; listÊ†áÁ≠æÁöÑvalueÂÜôÊòé‰∫ÜË¶ÅÊâ´ÊèèÁöÑpropertiesÊñá‰ª∂ÁöÑÂêçÂ≠óÔºåÂΩìÁÑ∂‰πüÂèØ‰ª•Êö¥ÂäõÂú∞Êâ´ÊèèÊâÄÊúâpropertiesÊñá‰ª∂Ôºö 1&lt;value&gt;classpath*:*.properties&lt;/value&gt; Êé•‰∏ãÊù•Êàë‰ª¨Â∞±ÂèØ‰ª•Ê≥®ÂÜåUserÁöÑbeanÔºåÁÑ∂ÂêéÂ∞ÜÂØπÂ∫îÂ±ûÊÄßÊ≥®ÂÖ•Âà∞Á±ªÁöÑÁßÅÊúâÂüü‰∏≠Ôºö 12345&lt;bean id="user" class="com.mogujie.trade.third.service.sync.User"&gt; &lt;property name="name" value="$&#123;user.name&#125;"/&gt; &lt;property name="city" value="$&#123;user.city&#125;"/&gt; &lt;property name="phone" value="$&#123;user.phone&#125;"/&gt;&lt;/bean&gt; ÁÑ∂ÂêéÊàë‰ª¨ÂÜô‰∏™ÂçïÊµãË∑ë‰∏ÄË∑ëÔºö 1234567891011@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(&#123;"classpath*:spring-biz.xml"&#125;)public class UserTest &#123; @Autowired private User user; @Test public void testUserProperties() &#123; System.out.println("System out: " + user.toString()); &#125;&#125; Áúã‰∏ãÁªìÊûúÔºö 1System out: User(name=Olive, city=hangzhou, phone=16668815388) okÔºÅdoneÔºÅ 2. @ValueÊ≥®Ëß£Ë¶Å‰ΩøÁî®@ValueÊ≥®Ëß£ÔºåÈÇ£‰πàÊàë‰ª¨È¶ñÂÖàË¶ÅÂØπUserÁ±ªÂÅöÂá∫‰øÆÊîπÔºåÂõ†‰∏∫‰πãÂâçÊòØÈÄöËøáxmlÊ≥®ÂÜåuser beanÔºåÁé∞Âú®ÂàôÈúÄË¶ÅÊòæÂºèÂú∞Áî®@Service‰øÆÈ•∞UserÁ±ªÔºåÂπ∂‰∏îÁªôUserÁ±ªÁöÑÁßÅÊúâÂüüÈÉΩÂä†‰∏ä@ValueÊ≥®Ëß£ÔºàÊ≠§Êó∂Â∞±‰∏çÁî®ÈÄöËøáxmlÊù•Ê≥®ÂÜåuser beanÔºâÔºö 1234567891011@Service("user")@Data@ToStringpublic class User &#123; @Value("$&#123;user.name&#125;") private String name; @Value("#&#123;configProperties['user.city']&#125;") private String city; @Value("$&#123;user.phone&#125;") private Long phone;&#125; ÈáçÊñ∞Ë∑ë‰∏ãÂçïÊµãÔºåÊàêÂäü‰∫ÜÔΩûÁªìÊûúÂíå‰∏äÈù¢‰∏ÄÊ†∑ÁöÑÔºåÂ∞±‰∏çË¥¥Âá∫Êù•‰∫Ü Âè¶Â§ñÔºå Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Âú®city‰∏äÁöÑ@ValueÊ≥®Ëß£Áî®ÁöÑÊòØ‚Äù#{}‚ÄùÔºå‰∫ÜËß£@ValueÊ≥®Ëß£ÁöÑÂêåÂ≠¶ÂèØËÉΩÁü•ÈÅìÊúâ‰∏§ÁßçËÆæÁΩÆÂ±ûÊÄßÂÄºÁöÑÊñπÊ≥ïÔºö@Value(‚Äú#{}‚Äù)‰∏é@Value(‚Äú${}‚Äù)„ÄÇÈÇ£‰πàËøô‰∏§ÁßçÊñπÂºèÊúâ‰ªÄ‰πàÂå∫Âà´Âë¢Ôºü 2.1 @Value(‚Äú#{}‚Äù) SpELË°®ËææÂºè@Value(‚Äú#{}‚Äù) Ë°®Á§∫SpElË°®ËææÂºèÈÄöÂ∏∏Áî®Êù•Ëé∑ÂèñbeanÁöÑÂ±ûÊÄßÔºåÊàñËÄÖË∞ÉÁî®beanÁöÑÊüê‰∏™ÊñπÊ≥ï„ÄÇÂΩìÁÑ∂ËøòÊúâÂèØ‰ª•Ë°®Á§∫Â∏∏Èáè„ÄÇ@Value(‚Äú#{configProperties[‚Äòuser.city‚Äô]}‚Äù)Ê≥®Ëß£‰∏≠ÊúâconfigPropertiesÔºåÊåáÁöÑÊòØÈÖçÁΩÆÊñá‰ª∂ÁöÑÂä†ËΩΩÂØπË±°ÔºåÂç≥Êàë‰ª¨ÊúÄÂºÄÂßãÂº∫Ë∞ÉÁöÑË¶ÅÂú®xml‰∏≠Ê≥®ÂÜåÁöÑconfigProperties bean 2.2 @Value(‚Äú${t1.msgname}‚Äù)ËøôÁßçÂΩ¢Âºè‰∏çÈúÄË¶ÅÊåáÂÆöÂÖ∑‰ΩìÂä†ËΩΩÂØπË±°ÔºåËøôÊó∂ÂÄôÈúÄË¶ÅÂÆû‰æãÂåñPreferencesPlaceholderConfigurerÁ±ªÂØπË±°„ÄÇÊ≠§ÂØπË±°ÈÖçÁΩÆÂèØ‰ª•ÂèØ‰ª•Áõ¥Êé•Â§çÁî®configPropertiesÂØπË±°‰∏≠ÁöÑÈÖçÁΩÆÔºå‰πüÂèØ‰ª•Ëá™ÂÆöÈÖçÁΩÆÊñá‰ª∂Ë∑ØÂæÑ„ÄÇÂèØ‰ª•ÁúãÂà∞ÔºåÊàë‰ª¨Âú®‰∏ÄÂºÄÂßãÂ∞±Ê≥®ÂÜå‰∫ÜËøô‰∏™bean„ÄÇ ÊúâÂÖ¥Ë∂£ÁöÑÂêåÂ≠¶ÂèØ‰ª•È™åËØÅ‰∏Ä‰∏ã‰∏äÈù¢‰∏§‰∏™ÈÖçÁΩÆÊñá‰ª∂ÔºàÊàëÂΩìÁÑ∂È™åËØÅËøá‰∫ÜÂíØ:DÔºâ doneÔºÅ II. Áõ∏ÂÖ≥ÂçöÂÆ¢Êé®Ëçê[1]. SpringÊ≥®ÂÖ•ÂÄºÔºàValueÊ≥®Ëß£Ôºâ[2]. spring(Âü∫Á°Ä10) Ê≥®Ëß£@ValueËØ¶Ëß£]]></content>
      <tags>
        <tag>Java</tag>
        <tag>Spring</tag>
        <tag>ÈÖçÁΩÆÊñá‰ª∂</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysqlÁ¥¢ÂºïÂèäÊü•ËØ¢‰ºòÂåñÔºà‰∏âÔºâ‚Äî‚ÄîÁ¥¢ÂºïËÆæËÆ°Ê¶ÇËø∞]]></title>
    <url>%2F2018%2F09%2F04%2FsqlIndexAndQueryOptimize-3%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢Áªà‰∫éÂÜôÂà∞Ëøô‰∏™Á≥ªÂàóÊúÄÂêé‰∏ÄÁØáÊñáÁ´†‰∫ÜÔºåÂâç‰∏§ÁØáÁ¨¨‰∏ÄÁØáÈÄöËøáÊÖ¢Êü•ËØ¢Êó•ÂøóÂàÜÊûê‰∫ÜsqlËØ≠Âè•ÔºåÁ¨¨‰∫åÁØáËÆ≤Ëø∞‰∫ÜÁ¥¢ÂºïÁ≠âÊ¶ÇÂøµ„ÄÅÁ±ªÂûãÔºåÂπ∂‰∏îËÆ≤Ëø∞‰∫ÜÂ¶Ç‰ΩïÈÄöËøáexplainÊåá‰ª§Êù•ÂØπsqlËøõË°åÂàÜÊûêÔºåÊúÄÂêé‰πüÁªôÂá∫‰∫Ü‰∏Ä‰∫õÊü•ËØ¢ÂÆû‰æã„ÄÇ‰ªäÂ§©Á¨¨‰∏âÁØáÔºå‰∏ªË¶Å‰ºöËÆ≤‰∏ãmysql‰∏≠Á¥¢ÂºïÁöÑÊôÆÈÄÇÊÄßËÆæËÆ°ÊñπÊ°àÔºàÊØîÂ¶Ç‰∏âÊòüÁ¥¢ÂºïÁ≠âÊ¶ÇÂøµÂèäËÆæËÆ°ÊÄùË∑ØÔºâ‰ª•ÂèäËØÑÂà§Á¥¢ÂºïÊÄßËÉΩÁöÑ‰∏§ÁßçÊñπÊ≥ï„ÄÇ ‚Ö†. Âü∫Êú¨Ê¶ÇÂøµ‰∏éÂÅáËÆæ1. ÂØπdbË°®ÁöÑËØªÂèñÔºö ‰ªéÁ£ÅÁõò‰∏≠ËøõË°å‰∏ÄÊ¨°ÈöèÊú∫I/OÔºåÂç≥Â∞Ü‰∏Ä‰∏™È°µ‰ªéÁ£ÅÁõò‰∏≠ËØªÂèñËá≥Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†ÔºöÂ§ßÁ∫¶10ms ‰ªéÁ£ÅÁõòÊúçÂä°Âô®ÁöÑÁºìÂ≠ò‰∏≠ËøõË°åËØªÂèñÔºåÂΩìdbmsÈúÄË¶ÅÁöÑÈ°µ‰∏çÂú®Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†‰∏≠Ôºå‰ºöÂêëÁ£ÅÁõòÊúçÂä°Âô®ÂèëËµ∑ËØ∑Ê±ÇÔºåÊúçÂä°Âô®È¶ñÂÖàÂõûÂéªÊü•ËØ¢Ê≠§È°µÊòØÂê¶Âú®ÁºìÂÜ≤Âå∫‰∏≠ÔºåËã•Âú®ÁºìÂÜ≤Âå∫‰∏≠ÔºåËØªÂèñÁöÑÊó∂Èó¥Â∞ÜÂ§ßÂπÖÈôç‰ΩéÔºö1ms ÂØπÁ£ÅÁõòËøõË°åÈ°∫Â∫èËØªÂèñÔºå‰∏äÈù¢ËØ¥ÁöÑÈÉΩÊòØÂ∞Ü‰∏Ä‰∏™Ë°®È°µËØªÂèñÂà∞ÁºìÂÜ≤Ê±†ÁöÑÊÉÖÂÜµÔºåÂæàÂ§öÊó∂ÂÄôÊàë‰ª¨‰ºöÈúÄË¶ÅËØªÂèñÂ§ö‰∏™È°µÂà∞ÁºìÂÜ≤Ê±†‰∏≠ÔºåÁÑ∂ÂêéËøõË°åÈ°∫Â∫èÂ§ÑÁêÜÔºåÂêåÊó∂ËØªÂèñÂ§ö‰∏™È°µÂ∞ÜÂáèÂ∞ëÊØè‰∏™È°µË¢´Âπ≥ÂùáËØªÂèñÁöÑÊó∂Èó¥Ôºö0.1ms 2. ËÆøÈóÆdbmsËØªÂèñ‰∏Ä‰∏™Á¥¢ÂºïË°åÊàñ‰∏Ä‰∏™Ë°®Ë°åÁß∞‰∏∫‰∏ÄÊ¨°ËÆøÈóÆÔºöÁ¥¢ÂºïËÆøÈóÆÊàñË°®ËÆøÈóÆ„ÄÇËã•dbmsÊâ´ÊèèÁ¥¢ÂºïÊàñË°®ÁöÑ‰∏Ä‰∏™ÁâáÊÆµÔºàË¢´ËØªÂèñÁöÑË°åÂú®Áâ©ÁêÜ‰∏äÁõ∏ÈÇªÔºâÔºåÈÇ£‰πàÁ¨¨‰∏ÄÊ¨°ËØªÂèñ‰∏∫ÈöèÊú∫ËÆøÈóÆÔºàTRÔºâÔºåÂêéÁª≠Ë°åÁöÑËØªÂèñ‰∏∫È°∫Â∫èËÆøÈóÆÔºàTSÔºâ„ÄÇ 3. Ë∞ìËØçwhereËØ≠Âè•‰∏≠ÁöÑÊù°‰ª∂Ë¢´Áß∞‰∏∫ Ë∞ìËØç 4. Á¥¢ÂºïÁâáÂèäÂåπÈÖçÂàóÁ¥¢ÂºïÁâáÊòØsqlÊü•ËØ¢Âú®ÊâßË°åËøáÁ®ã‰∏≠Êâ´ÊèèÁöÑ‰∏Ä‰∏™Á¥¢ÂºïÁâáÊÆµÔºåÂú®Ëøô‰∏™ËåÉÂõ¥‰∏≠ÁöÑÁ¥¢ÂºïÂ∞ÜË¢´È°∫Â∫èÊâ´ÊèèÔºõÁ¥¢ÂºïÁâáÁöÑÂéöÂ∫¶Êåá Ë∞ìËØçË°®ËææÂºèÁ°ÆÂÆöÁöÑËåÉÂõ¥ÔºåÁ¥¢ÂºïÁâáË∂äÁ™ÑËØ¥ÊòéÂåπÈÖçÂà∞ÁöÑÊï∞ÊçÆË°åÊï∞Ë∂äÂ∞ëÔºåÈÇ£‰πàÁ¥¢ÂºïËÆøÈóÆÂèäÂØπË°®ÁöÑËØªÂèñÁöÑÂºÄÈîÄË∂äÂ∞è„ÄÇÂè¶‰∏ÄÁßçÂπøÊ≥õÊèèËø∞Á¥¢ÂºïÁâáÁöÑÊñπÊ≥ïÊòØÂÆö‰πâ Á¥¢ÂºïÂåπÈÖçÂàóÁöÑÊï∞Èáè„ÄÇ 5. Á¥¢ÂºïÂåπÈÖçÂàóÂíåËøáÊª§ÂàóÊúâ‰∫õÂàóÂèØËÉΩÂêåÊó∂Â≠òÂú®‰∫éwhereÂ≠êÂè•‰∏≠‰∏éÁ¥¢Âºï‰∏≠Ôºå‰ΩÜÊòØËøô‰∏™ÂàóÊâÄÂú®ÁöÑÁ¥¢ÂºïÂç¥‰∏çËÉΩÁîüÊïàÔºàÊØîÂ¶Ç‰πãÂâçÊâÄËØ¥ÁöÑÔºåwhereÂ≠êÂè•‰∏≠Á¢∞Âà∞ËåÉÂõ¥Êü•ËØ¢ÔºåÂÖ∂ÂêéÁöÑÁ¥¢ÂºïÂàóÂ∞Ü‰∏çÁîüÊïàÔºâÔºåËøôÊ†∑ÁöÑÂàóÁß∞‰∏∫ËøáÊª§ÂàóÔºåÂõ†‰∏∫ÈÄöËøáÁ¥¢Âºï‰∏äÁöÑËøáÊª§ÂàóËÉΩÂ§üÈÅøÂÖçÂõûË°®ËÆøÈóÆ„ÄÇ‰∏éËøáÊª§ÂàóÁõ∏ÂØπÁöÑÔºåÂ¶ÇÊûúwhereÊù°‰ª∂‰∏≠ÁöÑ‰∏ÄÂàóÂêåÊó∂Âú®Á¥¢Âºï‰∏≠ÔºåÂπ∂‰∏îËÉΩÂèÇ‰∏éÁ¥¢ÂºïÁöÑÂÆö‰πâÔºåÈÇ£‰πàËøôÂàóÂ∞±ÊòØÂåπÈÖçÂàó„ÄÇ 6. ËøáÊª§Âõ†Â≠êÂÖ∂ÊèèËø∞‰∫ÜË∞ìËØçÁöÑÈÄâÊã©ÊÄßÔºåÂç≥Êª°Ë∂≥whereÊù°‰ª∂ÁöÑËÆ∞ÂΩïÂç†ÊâÄÊúâËÆ∞ÂΩïÊÄªÊï∞ÁöÑÊØî‰æã„ÄÇÂú®ËØÑ‰ª∑Á¥¢ÂºïÊòØÂê¶ÂêàÈÄÇÊó∂ÔºåËøáÊª§Âõ†Â≠êÂæàÈáçË¶Å„ÄÇÂπ∂‰∏îÂú®ÂÆûÈôÖ‰∏≠Ôºå‰∏ÄËà¨ËÄÉËôëÊúÄÂ∑ÆÊÉÖÂÜµ‰∏ãÁöÑËøáÊª§Âõ†Â≠êÔºåËÄå‰∏çÊòØÂπ≥ÂùáËøáÊª§Âõ†Â≠ê„ÄÇ ‚Ö°. ÊúÄ‰ºòÁ¥¢ÂºïÊ¶ÇÂøµÂèäËÆæËÆ°ÊÄùË∑Ø1. ‰∏âÊòüÁ¥¢Âºï‰∏âÊòüÁ¥¢ÂºïÊòØ‰∏Ä‰∏™Ê¶ÇÂøµÔºåË°®Á§∫ÂØπ‰∫é‰∏Ä‰∏™Êü•ËØ¢Êù•ËØ¥ÊúÄÁêÜÊÉ≥ÁöÑÁ¥¢Âºï„ÄÇÊó¢ÁÑ∂ÊòØ‰∏âÊòüÁ¥¢ÂºïÔºåÈÇ£ÂøÖÁÑ∂ÊòØÊúâ‰∏âÈ¢óÊòüÔºåÈÇ£‰πàÊòüÁ∫ßÂ¶Ç‰ΩïÁ°ÆÂÆöÂë¢ÔºüÂ¶ÇÊûú‰∏é‰∏Ä‰∏™Êü•ËØ¢Áõ∏ÂÖ≥ÁöÑÁ¥¢ÂºïË°åÊòØÁõ∏ÈÇªÁöÑÔºåÊàñËÄÖËá≥Â∞ëË∂≥Â§üÈù†ËøëÁöÑËØùÔºåÈÇ£Ëøô‰∏™Á¥¢ÂºïÂ∞±ÂèØ‰ª•Ë¢´Ê†áËÆ∞‰∏äÁ¨¨‰∏ÄÈ¢óÊòü„ÄÇËøôÊúÄÂ∞èÂåñ‰∫ÜÂøÖÈ°ªÊâ´ÊèèÁöÑÁ¥¢ÂºïÁâáÁöÑÂÆΩÂ∫¶Ôºõ Â¶ÇÊûúÁ¥¢ÂºïË°åÁöÑÈ°∫Â∫è‰∏éÊü•ËØ¢ËØ≠Âè•ÁöÑÈúÄÊ±Ç‰∏ÄËá¥ÔºåÂàôÁ¥¢ÂºïÂèØ‰ª•Ë¢´Ê†áËÆ∞‰∏äÁ¨¨‰∫åÈ¢óÊòü„ÄÇËøôÊéíÈô§‰∫ÜÊéíÂ∫èÊìç‰ΩúÔºõ Â¶ÇÊûúÁ¥¢ÂºïË°åÂåÖÂê´Êü•ËØ¢ËØ≠Âè•‰∏≠ÁöÑÊâÄÊúâÂàó‚Äî‚ÄîÈÇ£‰πàÁ¥¢ÂºïÂ∞±ÂèØ‰ª•Ë¢´Ê†áËÆ∞‰∏äÁ¨¨‰∏âÈ¢óÊòü„ÄÇËøôÈÅøÂÖç‰∫ÜËÆøÈóÆË°®ÁöÑÊìç‰ΩúÔºå‰ªÖËÆøÈóÆÁ¥¢ÂºïÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ ÂØπ‰∫éËøô‰∏âÈ¢óÊòüÔºåÁ¨¨‰∏âÈ¢óÈÄöÂ∏∏ÊòØÊúÄÈáçË¶ÅÁöÑÔºàÂÖ∂ÂÆûËøôÈáåÁöÑËØ¥ÊòéÂæàÁêÜËÆ∫‰πüÂæàÊãóÂè£Ôºå‰∏ãÈù¢‰ºöÁªôÂá∫ÂÖ∑‰Ωì‰æãÂ≠êÊù•ËØ¥ÊòéÔºâ„ÄÇ 2. ÂÆΩÁ¥¢Âºï‰∏éÁ™ÑÁ¥¢ÂºïÂÆΩÁ¥¢ÂºïÊòØÊåá‰∏Ä‰∏™Ëá≥Â∞ëÊª°Ë∂≥Á¨¨‰∏âÈ¢óÊòüÁöÑÁ¥¢ÂºïÔºåÊ≠§Á¥¢ÂºïÂåÖÂê´‰∫ÜselectËØ≠Âè•ÊâÄÊ∂âÂèäÁöÑÊâÄÊúâÂàóÔºåÂõ†Ê≠§ËØ•Êü•ËØ¢Âè™ÈúÄËÆøÈóÆÁ¥¢ÂºïËÄå‰∏çÂøÖÂõûË°®Êü•ËØ¢„ÄÇ 3. ‰∏æ‰∏™‰∏âÊòüÁ¥¢ÂºïËÆæËÆ°ÁöÑÊ†óÂ≠êÔºöÊØîÂ¶ÇËØ¥Â¶Ç‰∏ãÁöÑ‰∏ÄÊù°sqlÔºö 1select sex from user where name=‚Äújack‚Äù and city=‚Äúhangzhou‚Äù order by age Á¨¨‰∏ÄÈ¢óÊòüÔºöÂèñÂá∫ÊâÄÊúâÁ≠âÂÄºË∞ìËØçÁöÑÂàóÔºàÂç≥whereÊù°‰ª∂ÂêéÁöÑÂàóÔºönameÂíåcityÔºâÔºåÂ∞ÜnameÂíåcity‰Ωú‰∏∫Á¥¢ÂºïÁöÑÂºÄÂ§¥ÔºåÂπ∂‰∏î‰∏çË¶ÅÊ±Ç‰∏•Ê†ºÁöÑÈ°∫Â∫è„ÄÇËøôÂèØ‰ª•‰ΩøÁ¥¢ÂºïÁâáÂÆΩÂ∫¶Áº©Áü≠Ëá≥ÊúÄÁ™Ñ Á¨¨‰∫åÈ¢óÊòüÔºöÂ∞ÜÁî®Êù•ÊéíÂ∫èÁöÑÂàóÔºàoder by ageÔºâÂä†ÂÖ•Âà∞Á¥¢Âºï‰∏≠„ÄÇÈÇ£Áé∞Âú®Á¥¢ÂºïÂ∞±ÂèòÊàêÔºöname_city_age Á¨¨‰∏âÈ¢óÊòüÔºöÂ∞ÜÊü•ËØ¢ËØ≠Âè•Ââ©‰ΩôÁöÑÂàóÂä†Âà∞Á¥¢Âºï‰∏≠ÂéªÔºåÂàóÂú®Á¥¢Âºï‰∏≠ÁöÑÈ°∫Â∫èÂØπÊü•ËØ¢ÊÄßËÉΩÊó†ÂΩ±Âìç„ÄÇÊ≠§Êó∂Á¥¢ÂºïÂ∞ÜÂèòÊàêname_city_age_sexÔºåËøô‰∏™Á¥¢ÂºïÂ∞±ÊòØ‰∏âÊòüÁ¥¢Âºï 4. Á¥¢ÂºïÊòüÁ∫ßÁöÑÈÄâÊã©ËÉΩËÆæËÆ°Âá∫‰∏âÊòüÁ¥¢ÂºïÔºåÊó†ÁñëÊòØÊúÄÂ•ΩÁöÑÊÉÖÂÜµÔºà‰∏çËÄÉËôëÂ≠òÂÇ®Á¥¢ÂºïÁ≠âÁöÑÂºÄÈîÄÔºâÔºå‰ΩÜÂú®ÂæàÂ§öÂÆûÈôÖÊÉÖÂÜµ‰∏ãÔºåÊòØÊó†Ê≥ïËÆæËÆ°Âá∫ÁêÜÊÉ≥ÁöÑ‰∏âÊòüÁ¥¢ÂºïÁöÑ„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂØπ‰∫éÁ¥¢ÂºïÁöÑÊüê‰∫õÊòüÁ∫ßÊàë‰ª¨ÂøÖÈ°ªË¶ÅËøõË°åËàçÂºÉ„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºö 1select sex from user where age between a and b and city=‚Äúhangzhou‚Äù order by name Âú®Ëøô‰∏™sql‰∏≠ÔºåageÊòØ‰∏Ä‰∏™ËåÉÂõ¥Êù°‰ª∂ÔºåÂú®ÂâçÈù¢ÁöÑÂçöÂÆ¢‰∏≠ÔºàmysqlÁ¥¢ÂºïÂèäÊü•ËØ¢‰ºòÂåñÔºà‰∏ÄÔºâ‚Äî‚Äî‰ªéÊÖ¢Êü•ËØ¢ÂÆû‰æã‰∏≠ÂºÄÂßãÂàÜÊûêÔºâÊàë‰ª¨ËØ¥ËøáÔºåÂ¶ÇÊûúÁ¥¢ÂºïÂàóÊòØ‰∏Ä‰∏™ËåÉÂõ¥Êù°‰ª∂ÔºåÈÇ£‰πàÂÖ∂ÂêéÁöÑÁ¥¢ÂºïÈÉΩÂ∞ÜÂ§±Êïà„ÄÇÈÇ£Ëøô‰∏™Êó∂ÂÄôÁ¥¢ÂºïËØ•Â¶Ç‰ΩïËÆæËÆ°ÔºüÂú®ÂâçÈù¢ËØ¥ËøáÔºåÁ¥¢ÂºïÁöÑÁ¨¨‰∏âÈ¢óÊòüÈÄöÂ∏∏ÊòØÊúÄÈáçË¶ÅÁöÑÔºåÈÇ£‰πàÊàë‰ª¨ÂÖàËÆæËÆ°Á¨¨‰∏âÈ¢óÊòüÔºåÁ¥¢ÂºïÂ∞ÜÊòØÔºö*_user„ÄÇÊ∑ªÂä†name‰ºöËÆ©Á¥¢ÂºïÊª°Ë∂≥Á¨¨‰∫åÈ¢óÊòüÔºå‰ΩÜËøôÊòØÂü∫‰∫énameÂøÖÈ°ªÂú®ËåÉÂõ¥Ë∞ìËØçageÁöÑÂâçÈù¢ÁöÑÂÅáËÆæÁöÑÔºåÈÇ£‰πàÊ≠§Êó∂Á¥¢ÂºïÂ∞ÜÂèòÊàê:name_age_sexÊàñËÄÖcity_name_age_sexÔºåÈÇ£‰πàÊ≠§Êó∂ÁöÑÁ¥¢ÂºïÊª°‰∏çÊª°Ë∂≥Á¨¨‰∏ÄÈ¢óÊòüÁöÑÔºåÁ≠îÊ°àÊòØ‰∏çÊª°Ë∂≥ÁöÑ„ÄÇËÆ≤Âà∞ËøôÈáåÔºåÊàë‰ª¨‰∏ÄÂÆöËÉΩÂèëÁé∞ÔºåÁ¨¨‰∏ÄÈ¢óÊòüÂíåÁ¨¨‰∫åÈ¢óÊòüÊòØÂ≠òÂú®‰∫íÊñ•ÁöÑÔºåÂ¶ÇÊûúË¶ÅÊª°Ë∂≥Á¨¨‰∏ÄÈ¢óÊòüÔºåÈÇ£‰πàÁ¥¢ÂºïÂ∞ÜÊòØcity_age_name_sexÔºåÁÑ∂ËÄåÊ≠§Êó∂nameÂàóÁ¥¢ÂºïÊòØ‰∏ç‰ºöÁîüÊïàÁöÑÔºåÊ≠§Êó∂Â∞±Êó†Ê≥ïÈÅøÂÖçÊéíÂ∫èÔºå‰πüÂç≥Êó†Ê≥ïÊª°Ë∂≥Á¨¨‰∫åÈ¢óÊòü„ÄÇÁªº‰∏äÊâÄËø∞ÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÊòØÊó†Ê≥ïËÆæËÆ°Âá∫ÁêÜÊÉ≥ÁöÑ‰∏âÊòüÁ¥¢ÂºïÁöÑÔºåÊàë‰ª¨ÂøÖÈ°ªË¶ÅËøõË°åÂèñËàç„ÄÇËá≥‰∫éÊòØÈÄâÁ¨¨‰∏ÄÈ¢óÊòüËøòÊòØÁ¨¨‰∫åÈ¢óÊòüÔºå‰∏Ä‰∏™ÊôÆÈÅçÁöÑÁªìËÆ∫ÔºàËôΩÁÑ∂Âπ∂‰∏çÊòØÂÆåÂÖ®Ê≠£Á°ÆÁöÑÔºâÊòØÁ¨¨‰∏ÄÈ¢óÊòüË¶ÅÊØîÁ¨¨‰∫åÈ¢óÊòüÈáçË¶ÅÔºåÂõ†‰∏∫Âú®Á°¨‰ª∂ÂèëÂ±ïÊ∞¥Âπ≥Â¶ÇÊ≠§Âø´ÈÄüÁöÑ‰ªäÂ§©ÔºåÂèØËÉΩÊéíÂ∫èÂ∏¶Êù•ÁöÑÂºÄÈîÄËøú‰Ωé‰∫éÂõ†‰∏∫Á¥¢ÂºïÁâáÂ§™ÂéöËÄåÂ∏¶Êù•ÁöÑÊü•ËØ¢ÂºÄÈîÄ„ÄÇ Âè¶Â§ñÔºåËôΩÁÑ∂ÁêÜËÆ∫‰∏ä‰∏∫ÊØè‰∏Ä‰∏™Êü•ËØ¢ÈÉΩËÆæËÆ°Âá∫ÊúÄ‰ºòÁöÑÁ¥¢ÂºïÁúã‰ººÊòØÊØîËæÉÂ•ΩÁöÑÔºåÁÑ∂ËÄåÁúüÊ≠£Ëøô‰πàÂÅöÁöÑÊó∂ÂÄôÊàë‰ª¨ÈúÄË¶ÅËÄÉËôë‰∏ãÂºÄÈîÄÔºöÈ¶ñÂÖàËøáÂ§öÁöÑÁ¥¢Âºï‰ºöÂç†Áî®Â§ßÈáèÁöÑÁ£ÅÁõòÁ©∫Èó¥ÔºåÊàë‰ª¨ÈúÄË¶ÅËØÑ‰º∞Á¥¢ÂºïÂ∏¶Êù•ÁöÑÊî∂ÁõäÊòØÂê¶ËÉΩÊäµÊ∂àÁ£ÅÁõòÁ©∫Èó¥Â∏¶Êù•ÁöÑÂºÄÈîÄÔºõÂÖ∂Ê¨°Ë°®‰∏äÊúâÂ§™Â§öÁöÑÁ¥¢ÂºïÔºàÂπ∂‰∏îËøô‰∫õÁ¥¢ÂºïÂèØËÉΩÂ≠òÂú®ÂÜó‰ΩôÔºâÔºå‰ºö‰ΩødbÁöÑÊèíÂÖ•„ÄÅÊõ¥Êñ∞‰∏éÂà†Èô§Êìç‰ΩúÂèòÂæóËæÉÊÖ¢ÔºõÊúÄÂêéÔºåËæÉÈ¢ëÁπÅÁöÑÊèíÂÖ•È¢ëÁéáÔºåÂèØËÉΩ‰ºöÂä†Â§ßÁ£ÅÁõòÁöÑË¥üËΩΩ„ÄÇÊâÄ‰ª•ÔºåÁêÜËÆ∫ÁªàÁ©∂Âè™ÊòØÁêÜËÆ∫ÔºåÂÖ∑‰ΩìÈóÆÈ¢òËøòÈúÄË¶ÅÂÖ∑‰ΩìÂàÜÊûê„ÄÇ ‚Ö¢. Â¶Ç‰ΩïËÆæËÆ°ÂèäËØÑ‰º∞Á¥¢ÂºïÊÄßËÉΩÈ¶ñÂÖàÁªôÂá∫‰∏§‰∏™Âø´ÈÄü‰∏îÊúâÁî®ÁöÑÊñπÊ≥ïÔºö1. Âü∫Êú¨ÈóÆÈ¢òÊ≥ïÔºàBasic Question, BQÔºâ2. Âø´ÈÄü‰∏äÈôê‰º∞ÁÆóÊ≥ïÔºàQuick Upper-Bound Estimate, QUBEÔºâ 1. Âü∫Êú¨ÈóÆÈ¢òÊ≥ïBQÊòØ‰∏Ä‰∏™ÂæàÁÆÄÂçïÂæàÂø´ÈÄüÁöÑËØÑ‰º∞ÊñπÊ≥ïÔºåÂØπ‰∫éÊØè‰∏Ä‰∏™Êü•ËØ¢ËØ≠Âè•ÔºåÈ¶ñÂÖàÈÉΩË¶ÅÈóÆËøô‰πà‰∏Ä‰∏™ÈóÆÈ¢òÔºö ÊòØÂê¶Â≠òÂú®‰∏Ä‰∏™Á¥¢ÂºïÂåÖÂê´‰∫ÜwhereÂ≠êÂè•ÊâÄÁî®Âà∞ÁöÑÊâÄÊúâÂàóÔºüÂ¶ÇÊûúÁ≠îÊ°àÊòØ‰∏çÂ≠òÂú®ÔºåÈÇ£‰πàÂ∫îËØ•ËÄÉËôëÂ∞ÜÁº∫Â∞ëÁöÑÂàóÂä†ÂÖ•Âà∞Áé∞ÊúâÁöÑÁ¥¢Âºï‰∏≠Âéª„ÄÇÊ≠§Êó∂‰ºö‰∫ßÁîü‰∏Ä‰∏™ÂçäÂÆΩÁ¥¢ÂºïÔºåËôΩÁÑ∂ËøôÊ†∑Á¥¢ÂºïÂè™ËÉΩÊãøÂà∞‰∏ÄÊòüÔºå‰ΩÜÁ¥¢ÂºïËøáÊª§ÂèØ‰ª•‰øùËØÅÂõûË°®ËÆøÈóÆÂè™ÂèëÁîüÂú®ÊâÄÊúâÊü•ËØ¢Êù°‰ª∂ÈÉΩÊª°Ë∂≥ÁöÑÊó∂ÂÄô„ÄÇÂ¶ÇÊûúÊÄßËÉΩËøò‰∏çÂ§üÔºåÈÇ£‰πàÂèØ‰ª•Â∞ÜÊü•ËØ¢ÊâÄÊúâÊ∂âÂèäÂà∞ÁöÑÂàóÈÉΩÂä†Âà∞Á¥¢Âºï‰∏äÔºåËøô‰ºö‰∫ßÁîü‰∏Ä‰∏™ÈÅøÂÖçÊâÄÊúâË°®ËÆøÈóÆÁöÑÂÆΩÁ¥¢Âºï„ÄÇÂ¶ÇÊûúÊü•ËØ¢ËøòÊòØÂæàÊÖ¢ÔºåÈÇ£‰πàÂ∞±ÈáçÊñ∞ËÆæËÆ°Á¥¢ÂºïÔΩû 2. Âø´ÈÄü‰∏äÈôê‰º∞ÁÆóÊ≥ï„ÄÇÁõ∏ÊØî‰∫éBQÔºåQUBEÊòØ‰∏Ä‰∏™ÊØîËæÉËÄóÊó∂ÁöÑÊñπÊ≥ïÔºå‰ΩÜÊòØÂÆÉÁöÑ‰ºòÁÇπ‰πüÂæàÊòéÊòæ‚Äî‚ÄîQUBEÂèØ‰ª•‰º∞ÁÆóÂá∫Êü•ËØ¢ÁöÑÊÄßËÉΩ„ÄÇQUBEÈÄöËøáËÆ°ÁÆóÊú¨Âú∞ÂìçÂ∫îÊó∂Èó¥ÔºàLRTÔºâÊù•ËØÑ‰º∞Êü•ËØ¢ÁöÑÊÄßËÉΩ„ÄÇÊàë‰ª¨Âè™‰ΩøÁî®TRÔºàÈöèÊú∫ËÆøÈóÆÁöÑÊï∞ÈáèÔºâÂíåTSÔºàÈ°∫Â∫èËÆøÈóÆÁöÑÊï∞ÈáèÔºâÊù•ËøõË°åÊü•ËØ¢ËÄóÊó∂ÁöÑ‰º∞ÁÆó„ÄÇ QUBE‰∏≠ÂÅáËÆæÂçïÊ¨°ÈöèÊú∫ËÆøÈóÆÁöÑÊó∂Èó¥‰∏∫10msÔºåÈ°∫Â∫èÈöèÊú∫ËÆøÈóÆÁöÑÊó∂Èó¥‰∏∫0.1ms 3. QUBEÁ§∫‰æãÔºö 3.1 ‰∏ªÈîÆÁ¥¢ÂºïËÆøÈóÆÔºöËÄÉËôëÂ¶Ç‰∏ãÁöÑsqlÔºàÂÅáËÆæid‰∏∫‰∏ªÈîÆÔºâÔºöselect id, age, city from user where id = xxxÈÄöËøá‰∏ªÈîÆÁ¥¢ÂºïËØªÂèñ‰∏Ä‰∏™Ë°®Ë°åÈúÄË¶ÅÂàÜÂà´ÈöèÊú∫ËÆøÈóÆ‰∏ÄÊ¨°Ë°®‰ª•ÂèäÁ¥¢ÂºïÔºåÂõ†Ê≠§Ê≠§Êü•ËØ¢ÁöÑÂºÄÈîÄÂ§ßÁ∫¶ÊòØ2x10ms=20ms„ÄÇ3.2 ËÅöÁ∞áÁ¥¢ÂºïËÆøÈóÆÔºö 1select id, age from user where city = xx and post = xxx order by age ÂÅáÂ¶Çcity_post_ageÊòØ‰∏Ä‰∏™ËÅöÁ∞áÁ¥¢ÂºïÔºåÂπ∂‰∏îÊù≠Â∑ûÂ∏ÇÂÜÖÈÇÆÊîøÁºñÁ†Å‰∏∫xxxÁöÑÁî®Êà∑Êúâ1000‰∏™ÔºåÂèØ‰ª•ÈÄöËøá‰∏âÊòüÁ¥¢ÂºïÊ≥ïÂàÜÊûêËøô‰∏™Á¥¢ÂºïÊòØ‰∏§ÊòüÁöÑÔºàÁ¨¨‰∏ÄÈ¢óÂèäÁ¨¨‰∫åÈ¢óÔºâÔºå‰ΩÜÊòØÊòØ‰∏çÊª°Ë∂≥ÁöÑÁ¨¨‰∏âÈ¢óÊòüÁöÑÔºåÂÆÉÂøÖÈ°ªÂõûË°®ÂéªËÆøÈóÆ‰∏çÂú®Á¥¢ÂºïÂàó‰∏≠ÁöÑÂàó„ÄÇÈ¶ñÂÖàÔºåÈúÄË¶ÅËøõË°å‰∏ÄÊ¨°ÈöèÊú∫ËÆøÈóÆÊâæÂà∞Á¥¢ÂºïÁâá‰∏äÁ¨¨‰∏ÄÊù°Á¨¶ÂêàÊù°‰ª∂ÁöÑÁ¥¢ÂºïË°åÔºåËøôÊòØ‰∏ÄÊ¨°TRÔºåÁÑ∂ÂêéÈúÄË¶Å1000Ê¨°TSÊù•ËØªÂèñÁ¥¢ÂºïÔºåÂõ†Ê≠§ËØªÂèñÁ¥¢ÂºïÁâáÁöÑÂºÄÈîÄ‰∏∫1x10ms+1000x0.01ms=20msÔºõÁÑ∂ÂêéÊù•ËÆ°ÁÆóÂõûË°®ÁöÑÂºÄÈîÄÔºåÂõûË°®ÈúÄË¶Å‰∏ÄÊ¨°TRÔºå‰ª•Âèä999Ê¨°TSÔºåÊâÄ‰ª•ÂõûË°®ÁöÑÂºÄÈîÄÂ§ßÁ∫¶‰πüÊòØ20ms„ÄÇÂõ†Ê≠§ËøôÊù°sqlÊÄªÁöÑËÄóÊó∂Â§ßÁ∫¶ÊòØ40ms„ÄÇ3.3 ÈùûËÅöÁ∞áÁ¥¢ÂºïËÆøÈóÆÔºöËøòÊòØÂ¶Ç‰∏äÁöÑsqlÔºåÂ¶ÇÊûúcity_post_age‰∏çÊòØ‰∏Ä‰∏™ËÅöÁ∞áÁ¥¢ÂºïÔºåÈÇ£‰πàÊàë‰ª¨Áü•ÈÅìÔºåÂõûË°®ÁöÑËÆøÈóÆÂ∞ÜÂèòÊàê1000Ê¨°ÁöÑTRÔºåÊ≠§Êó∂ÂõûË°®ÁöÑËÄóÊó∂Â∞ÜÊòØ10sÔºÅÊ≠§Êó∂ÂèØ‰ª•ËÄÉËôëÂ∞ÜidÂä†ÂÖ•Âà∞Á¥¢Âºïcity_post_age‰∏≠ÔºåËøôÊ†∑‰æøÁúÅÂéª‰∫ÜÂõûË°®Êü•ËØ¢ÁöÑÂºÄÈîÄ„ÄÇ ‚Ö£. ÊÄªÁªìËøôÊ¨°Êàë‰ª¨È¶ñÂÖàÂÆö‰πâ‰∫Ü‰∏Ä‰∫õÂÅáËÆæÂèäÊ¶ÇÂøµÔºåÁÑ∂ÂêéÊèêÂá∫‰∫Ü‚Äú‰∏âÊòüÁ¥¢Âºï‚ÄùÁöÑÊ¶ÇÂøµÂèäËÆæËÆ°ÊÄùË∑ØÔºåÊúÄÂêéËÆ≤Ëø∞ËØÑ‰º∞Á¥¢ÂºïÊÄßËÉΩÁöÑ‰∏§‰∏™ÊñπÊ°à„ÄÇÊÄªÁöÑÊù•ËØ¥ÔºåÊàëËÆ§‰∏∫ËøôÈáåÊâÄÊèêÂá∫ÁöÑÁ¥¢ÂºïËÆæËÆ°ÂèäËØÑ‰º∞ÁöÑÊñπÊ°àÈÉΩÊòØÁÆÄÂçïÊòìÁî®ÁöÑÔºåÊúâÂÖ¥Ë∂£ÁöÑ‰∏çÂ¶®ËØïËØïÁúã„ÄÇBTWÔºåÂÖ∂ÂÆûÊàëËßâÂæóexplain‰πüÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÂàÜÊûêÊÄßËÉΩÁöÑÊñπÊ≥ïÔºåÂú®Á¥¢ÂºïÂª∫Á´ãÂÆå‰πãÂêéÔºå‰∏çÂ¶®‰ΩøÁî®explainÊù•ÂàÜÊûê‰∏ãÊü•ËØ¢ÁöÑÊÄßËÉΩÔΩû ‚Ö§. Reference[1]. Lahdenmaki T, Leach M. Relational Database Index Design and the Optimizers[M]. Wiley-Interscience, 2005.[2]. Schwartz B, Zaitsev P, Tkachenko V. High Performance MySQL: Optimization, Backups, and Replication[M]. O‚ÄôReilly Media, Inc. 2012.]]></content>
      <tags>
        <tag>sql</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
        <tag>Á¥¢Âºï</tag>
        <tag>‰ºòÂåñ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysqlÁ¥¢ÂºïÂèäÊü•ËØ¢‰ºòÂåñÔºà‰∫åÔºâ‚Äî‚ÄîÁ¥¢ÂºïÊ¶ÇËø∞]]></title>
    <url>%2F2018%2F08%2F30%2FsqlIndexAndQueryOptimize-2%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢Èöî‰∫ÜÈÇ£‰πà‰πÖÔºåÁªà‰∫éÂÜô‰∫ÜÁ¥¢ÂºïÂèäÊü•ËØ¢‰ºòÂåñÁöÑÁ¨¨‰∫åÁØáÂçöÊñáÔºåÁ°ÆÂÆûÁî®‰∫ÜÂ•ΩÈïøÁöÑÊó∂Èó¥ÂéªÁúã‰π¶ÔºåÁúãÂçöÂÆ¢ÁÑ∂ÂêéÊÄªÁªì„ÄÇÁÑ∂ËÄåÔºå‰∏çÂæó‰∏çËØ¥Êàë‰πãÂâçÂØπsql‰ª•ÂèäÁ¥¢ÂºïÁõ∏ÂÖ≥ÁöÑÁü•ËØÜ‰∫ÜËß£Á°ÆÂÆûÁîöÂ∞ëÔºàÂπ∂‰∏îÂú®ÂÆûÈôÖ‰∏≠Áî®ÁöÑ‰πü‰∏çÂ§™Â§öÔºâÔºåÂõ†Ê≠§Âç≥‰ΩøË°•ÂÖÖ‰∫Ü‰∏Ä‰∫õÁõ∏ÂÖ≥Áü•ËØÜÔºå ÂÜôÂá∫Êù•ÁöÑÊñáÁ´†‰πü‰ºöÊúâÂæàÂ§öÁöÑ‰∏çË∂≥‰∏éÁ∫∞Êºè„ÄÇÂú®Ê≠§‰πüÂ∏åÊúõ‰ªéÊñáÁ´†‰∏≠ÁúãÂá∫Êúâ‰ªÄ‰πà‰∏çË∂≥ÁöÑÊúãÂèãÂèØ‰ª•Â∞ΩÊÉÖÊâπËØÑÊåáÊ≠£ÔΩûËøôÁØáÂçöÂÆ¢‰∏ªË¶ÅÂàÜ‰∏â‰∏™ÈÉ®ÂàÜÔºåÁ¨¨‰∏ÄÈÉ®ÂàÜÁÆÄÂçï‰ªãÁªç‰∫ÜÁ¥¢ÂºïÁöÑÊ¶ÇÂøµÂèäÁ±ªÂûãÔºõÁ¨¨‰∫åÈÉ®ÂàÜ‰ªãÁªç‰∫ÜÂ¶Ç‰ΩïÈÄöËøáExplainÊåá‰ª§ÂàÜÊûêsqlÔºõÁ¨¨‰∏âÈÉ®ÂàÜÁªôÂá∫‰∫Ü‰∏Ä‰∫õsqlÁöÑÂÆû‰æã„ÄÇ ‚Ö†. Á¥¢ÂºïÊ¶ÇÂøµÂèäÁ±ªÂûã1 Á¥¢ÂºïÊ¶ÇÂøµÁ¥¢ÂºïÊòØÂ≠òÂÇ®ÂºïÊìéÁî®Êù•Âø´ÈÄüÊâæÂà∞ËÆ∞ÂΩïÁöÑ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑ„ÄÇÁ±ª‰ºº‰∫é‰π¶ÁõÆÂΩïÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅÊâæ‚ÄúÁ¨¨‰∏âÁ´†Á¨¨ÂõõÂ∞èËäÇ‚ÄùÁöÑÂÜÖÂÆπÔºåÈÇ£‰πàÊàë‰ª¨È¶ñÂÖàÂÖà‰ªéÁõÆÂΩï‰∏≠ÊâæÂà∞ÂÖ∂ÊâÄÂú®ÁöÑÈ°µÊï∞ÔºåÁÑ∂ÂêéÂÜç‰ªéÂÖ∑‰ΩìÁöÑÈ°µ‰∏≠ÊâæÂà∞Êàë‰ª¨ÈúÄË¶ÅÁöÑÊï∞ÊçÆ„ÄÇÁ¥¢Âºï‰πüÊòØ‰∏ÄÊ†∑ÔºåÂú®Êü•ËØ¢Êó∂ÔºåÂÖàÊâæÂà∞Á¥¢ÂºïÊâÄÂú®ÁöÑ‰ΩçÁΩÆÔºåÁÑ∂ÂêéÊ†πÊçÆÁ¥¢ÂºïÂåπÈÖçÂà∞ÁöÑËÆ∞ÂΩïÊù•ÊâæÂà∞ÂØπÂ∫îÁöÑÊï∞ÊçÆ„ÄÇ 2 Á¥¢ÂºïÁ±ªÂûã 2.1 b-treeÁ¥¢Âºïb-treeÁ¥¢ÂºïÊòØmysqlÂºïÊìé‰∏≠Áî®ÁöÑËæÉÂ§öÁöÑ‰∏ÄÁßçÁ±ªÂûãÔºåÂ§ßÂ§öÊï∞ÁöÑÂºïÊìéÈÉΩÊîØÊåÅÔºåÈô§‰∫ÜarchiveÂºïÊìéÔºàÂØπËøô‰∏™Â•ΩÈôåÁîü - -Ôºâ„ÄÇ‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìé‰ΩøÁî®‰∏çÂêåÁöÑb-treeÁ¥¢ÂºïÔºåÂπ∂‰∏îÊÄßËÉΩ‰πüÊúâÂ∑ÆÂà´„ÄÇÊØîÂ¶ÇÂú®innodbÂºïÊìé‰∏≠‰ΩøÁî®b+treeÁ¥¢Âºï„ÄÇmyisamÂºïÊìé‰ºöÂØπÁ¥¢ÂºïËøõË°åÂâçÁºÄÂéãÁº©ÔºåÊâÄ‰ª•Á¥¢ÂºïÂæàÊõ¥Â∞èÔºõmyisam‰∏≠Á¥¢ÂºïÈÄöËøáÊï∞ÊçÆÁöÑÁâ©ÁêÜ‰ΩçÁΩÆÊù•ÂºïÁî®Á¥¢ÂºïË°åÔºåËÄåinnodb‰∏≠Ê†πÊçÆ‰∏ªÈîÆÂºïÁî®Á¥¢ÂºïË°å„ÄÇb-treeÁ¥¢ÂºïÂØπÁ¥¢ÂºïÊåâÁÖßÈ°∫Â∫èÁªÑÁªáÂ≠òÂÇ®ÁöÑÔºåÂõ†Ê≠§ÈÄÇÂêàÊü•ÊâæËåÉÂõ¥Êï∞ÊçÆ„ÄÇ B-treeÁ¥¢ÂºïÂú®ÂÆûÈôÖÂºÄÂèë‰∏≠ÊòØÁî®ÁöÑÊúÄÂ§öÊúÄÂπøÊ≥õÁöÑÁ¥¢ÂºïÁªìÊûÑÔºå‰πãÂêéÁöÑËÆ®ËÆ∫ÈÉΩÈªòËÆ§ÊòØ‰ª•B-treeÁ¥¢Âºï‰∏∫‰æã„ÄÇÂú®Êüê‰∫õ‰∏çÂΩìÁöÑÊü•ËØ¢ÊàñËÄÖÁ¥¢ÂºïÁöÑ‰ΩøÁî®‰∏≠‰ºöÂØºËá¥Á¥¢ÂºïÂ§±ÊïàÔºå‰∏ªË¶ÅÊúâ‰ª•‰∏ãËøôÂá†ÁßçÊÉÖÂÜµÔºö ‰∏•Ê†ºÈÅµÂæ™ÊúÄÂ∑¶ÂåπÈÖçÂéüÂàô„ÄÇÂç≥Êü•ËØ¢ÂøÖÈ°ª‰ªéÁ¥¢ÂºïÁöÑÊúÄÂ∑¶ÂâçÂàóÂºÄÂßã„ÄÇÊØîÂ¶Ç‰∏Ä‰∏™Á¥¢Âºï(name_age_dob)ÔºåÂ¶ÇÊûúË¶ÅÊü•ËØ¢age=18ÁöÑÁî®Êà∑ÔºåÂ∞±Êó†Ê≥ï‰ΩøÁî®(name_age_dob)Ëøô‰∏™Á¥¢Âºï‰∫Ü„ÄÇ ‰∏çËÉΩË∑≥ËøáÁ¥¢Âºï‰∏≠Èó¥ÁöÑÂàó„ÄÇÊØîÂ¶ÇÊàë‰ª¨Ë¶ÅÊü•Êâæage=18Âπ∂‰∏îdob=1024ÁöÑÁî®Êà∑Ôºå‰ΩÜ‰∏çÊåáÂÆöageÔºåÈÇ£‰πàÂ∞±Êó†Ê≥ï‰ΩøÁî®Âà∞(name_age_dob)Á¥¢ÂºïÔºåÂè™ËÉΩ‰ΩøÁî®Á¥¢ÂºïÁöÑÁ¨¨‰∏ÄÂàó„ÄÇ Êü•ËØ¢‰∏≠Êüê‰∏™ÂàóÂá∫Áé∞‰∫ÜËåÉÂõ¥Êü•ËØ¢ÔºåÈÇ£‰πàÂÆÉÂè≥ËæπÁöÑÂàóÈÉΩÊó†Ê≥ïÈÄöËøáÁ¥¢ÂºïÊù•ËøõË°å‰ºòÂåñÊü•ËØ¢„ÄÇËøôÂú®Ââç‰∏ÄÁØáÂçöÂÆ¢ÔºàxxxxÔºâ‰∏≠Â∞±ËÆ≤Ëø∞Ëøá„ÄÇ Á¥¢ÂºïÂ≠óÊÆµ‰∏ä‰ΩøÁî®‰∫ÜÔºà!= &lt;&gt; is null is not null or ÊàñËÄÖlike‰ª•‚Äù%_‚Äù ÂºÄÂ§¥ÔºâÁ≠â‰ºöÂØºËá¥Á¥¢ÂºïÂ§±ÊïàËÄåËΩ¨ÂÖ•ÂÖ®Ë°®Êâ´Êèè ÂØπÁ¥¢ÂºïÂàóËøõË°åÊìç‰ΩúÔºàËøôÈáåÊåáÁ¥¢ÂºïÂàó‰∏çËÉΩÊòØË°®ËææÂºèÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰πü‰∏çËÉΩÊòØÂáΩÊï∞ÁöÑÂèÇÊï∞ÔºâÔºåÊØîÂ¶Ç‰∏ãËæπÁöÑsqlÂ∞±‰∏çËÉΩ‰ΩøÁî®Á¥¢ÂºïÔºåÊòéÁúº‰∫∫‰∏ÄÁúãÂ∞±Áü•ÈÅìid=1023ÂïäÔºåÁÑ∂ËÄåMysqlÂºïÊìéÂπ∂‰∏ç‰ºöÈÇ£‰πàÁöÑÊô∫ËÉΩÔºåÊâÄ‰ª•Êàë‰ª¨Âú®Êü•ËØ¢Êó∂ËÉΩÁÆÄÂåñÊù°‰ª∂Â∞±ÁÆÄÂåñÊù°‰ª∂ÔºåË∂äÁÆÄÂçïË∂äÂ•Ω„ÄÇ 1select id from user where id+1=1024 2.2 ÂìàÂ∏åÁ¥¢ÂºïÂìàÂ∏åÁ¥¢ÂºïÂü∫‰∫éÂìàÂ∏åË°®ÂÆûÁé∞ÔºåmysqlÂºïÊìé‰∏≠Âè™ÊúâmemoryÊîØÊåÅÂìàÂ∏åÁ¥¢ÂºïÔºåÊàë‰ª¨Áü•ÈÅìÂìàÂ∏åË°®‰ºöÂ≠òÂú®‚ÄúÂìàÂ∏åÁ¢∞Êíû‚ÄùÁöÑÈóÆÈ¢òÔºåmemoryÂºïÊìéÊ†πÊçÆÈìæË°®Ê≥ïÊù•Ëß£ÂÜ≥ÈîÆÂÄºÂÜ≤Á™ÅÁöÑÊÉÖÂÜµ„ÄÇÁ±ªÊØî‰∫éÂìàÂ∏åË°®Ôºå‰ΩøÁî®ÂìàÂ∏åÁ¥¢ÂºïÊü•ÊâæÁöÑÈÄüÂ∫¶ÂçÅÂàÜÂø´„ÄÇ‰ΩÜ‰πüÊúâ‰∏Ä‰∫õÈôêÂà∂Ôºö ÂìàÂ∏åÁ¥¢ÂºïÂè™ÂåÖÂê´ÂìàÂ∏åÂÄº‰ª•ÂèäË°åÊåáÈíàÔºå‰∏çÂ≠òÂÇ®ÂÖ∑‰ΩìÂ≠óÊÆµÁöÑÂÄºÔºåÊâÄ‰ª•‰∏çËÉΩÊ†πÊçÆÂåπÈÖçÁ¥¢ÂºïÊù•ÈÅøÂÖçËØªÂèñË°®Ë°å ÂìàÂ∏åÁ¥¢ÂºïÁöÑÊï∞ÊçÆ‰∏çÊòØÊåâÁÖßÁ¥¢ÂºïÂÄºÈ°∫Â∫èÂ≠òÂÇ®ÁöÑÔºåÂõ†Ê≠§Êó†Ê≥ïÁî®‰∫éÊéíÂ∫èÔºàËøô‰∏™Â∫îËØ•ÂæàÂ•ΩÁêÜËß£Ôºâ ÂìàÂ∏åÁ¥¢ÂºïÂõ†‰∏∫ÊòØÊ†πÊçÆÂØπkeyËøõË°åhashÊù•Êü•ÊâæÁöÑÔºåÂõ†Ê≠§‰∏çÊîØÊåÅÈÉ®ÂàÜÁ¥¢ÂºïÂåπÈÖçÁöÑÊÉÖÂÜµ„ÄÇ ÂìàÂ∏åÁ¥¢Âºï‰∏çÊîØÊåÅËåÉÂõ¥Êü•ËØ¢ÔºåÂè™ÊîØÊåÅÁ≠âÂÄºÊü•ËØ¢ÔºàÊ≥®ÊÑèIN()‰πüÊòØ‰∏ÄÁßçÁ≠âÂÄºÊü•ËØ¢ÔºÅÔºâ ‰∏äÈù¢ËØ¥Âà∞‰∫ÜÂìàÂ∏åÁ¢∞ÊíûÔºåÂ¶ÇÊûúÁ¢∞ÊíûËøáÂ§öÔºåÂìàÂ∏åÁ¥¢ÂºïÁöÑÊÄßËÉΩÂ∞ÜÂèóÂæàÂ§ßÁöÑÂΩ±Âìç 2.3 ÂÖ®ÊñáÁ¥¢ÂºïÂÖ®ÊñáÁ¥¢ÂºïÊü•ÊâæÁöÑÊòØÊñáÊú¨‰∏≠ÁöÑÂÖ≥ÈîÆËØçÔºåËÄå‰∏çÊòØÁõ¥Êé•ÊØîËæÉÁ¥¢Âºï‰∏≠ÁöÑÂÄº„ÄÇÁî®ÁöÑ‰∏çÂ§öÔºàÊàëÊ†πÊú¨Ê≤°Áî®ËøáÔºâÔºåËøô‰πü‰∏çÊòØÊàëÊÉ≥ËØ¥ÁöÑÈáçÁÇπÔºåÊâÄ‰ª•‰∏çËØ¶ÁªÜÂ±ïÂºÄ„ÄÇ 2.4 ËÅöÁ∞áÁ¥¢ÂºïÈ¶ñÂÖàÔºåËÅöÁ∞áÁ¥¢ÂºïÂπ∂‰∏çÊòØ‰∏ÄÁßçÁÆÄÂçïÁöÑÁ¥¢ÂºïÁ±ªÂûãÔºåËÄåÊòØ‰∏ÄÁßçÊï∞ÊçÆÂ≠òÂÇ®ÊñπÂºè„ÄÇÂú®innodb‰∏≠ÔºåËÅöÁ∞áÁ¥¢ÂºïÂÆûÈôÖÂú®‰∏Ä‰∏™ÁªìÊûÑ‰∏≠ÂêåÊó∂‰øùÂ≠ò‰∫Üb-treeÁ¥¢Âºï‰ª•ÂèäÊï∞ÊçÆË°å„ÄÇ ËÅöÁ∞áÁ¥¢ÂºïÁöÑÊï∞ÊçÆÁöÑÁâ©ÁêÜÂ≠òÊîæÈ°∫Â∫è‰∏éÁ¥¢ÂºïÈ°∫Â∫èÊòØ‰∏ÄËá¥ÁöÑÔºåÂç≥ÔºöÂè™Ë¶ÅÁ¥¢ÂºïÊòØÁõ∏ÈÇªÁöÑÔºåÈÇ£‰πàÂØπÂ∫îÁöÑÊï∞ÊçÆ‰∏ÄÂÆö‰πüÊòØÁõ∏ÈÇªÂú∞Â≠òÊîæÂú®Á£ÅÁõò‰∏äÁöÑ„ÄÇÂõ†‰∏∫‰∏ÄÂº†Ë°®Âè™Êúâ‰∏Ä‰∏™Áâ©ÁêÜÁªìÊûÑÔºåÂõ†Ê≠§‰∏ÄÂº†Ë°®‰πüÂè™ËÉΩÊúâ‰∏Ä‰∏™ËÅöÁ∞áÁ¥¢Âºï„ÄÇËÅöÁ∞áÁ¥¢ÂºïÁöÑÂè∂Â≠êËäÇÁÇπÂ∞±ÊòØÊï∞ÊçÆËäÇÁÇπÔºåËÄåÈùûËÅöÁ∞áÁ¥¢ÂºïÁöÑÂè∂Â≠êËäÇÁÇπ‰ªçÁÑ∂ÊòØÁ¥¢ÂºïËäÇÁÇπÔºåÂπ∂‰∏îÊúâÊåáÂêëÂØπÂ∫îÊï∞ÊçÆÂùóÁöÑÊåáÈíà„ÄÇinnodbÈªòËÆ§‰ºö‰ª•‰∏ªÈîÆ‰Ωú‰∏∫ËÅöÁ∞áÁ¥¢ÂºïÔºåÂ¶ÇÊûúÊ≤°ÊúâÂÆö‰πâ‰∏ªÈîÆÔºåinnodb‰ºöÈÄâÊã©‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑÈùûÁ©∫Á¥¢ÂºïÊù•‰ª£Êõø„ÄÇÂ¶ÇÊûúÂâçÈù¢ÁöÑÊÉÖÂÜµÈÉΩ‰∏çÊª°Ë∂≥ÔºåÈÇ£‰πàinnodb‰ºöÈöêÂºèÂÆö‰πâ‰∏Ä‰∏™‰∏ªÈîÆÊù•‰Ωú‰∏∫ËÅöÁ∞áÁ¥¢Âºï„ÄÇ 2.5 Ë¶ÜÁõñÁ¥¢ÂºïË¶ÜÁõñÁ¥¢ÂºïÔºàCovering IndexÔºâ‰πü‰∏çÊòØÂ∏∏ËßÑÊÑè‰πâ‰∏äÁöÑÁ¥¢Âºï„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Á¥¢ÂºïÂåÖÂê´‰∫ÜÊâÄÊúâÊü•ËØ¢ÈúÄË¶ÅÁöÑÂ≠óÊÆµÔºåÈÇ£‰πà‰πÖÁß∞Ëøô‰∏™Á¥¢Âºï‰∏∫‚ÄúË¶ÜÁõñÁ¥¢Âºï‚Äù„ÄÇ‰ΩøÁî®‚ÄúË¶ÜÁõñÁ¥¢Âºï‚ÄùÂèØ‰ª•ÊûÅÂ§ßÊèêÈ´òÊü•ËØ¢ÊÄßËÉΩ„ÄÇ ‚Ö°. SQLÂàÜÊûêÂú®ËøõË°åsqlÂàÜÊûêÊó∂ÔºåexplainËØ≠Âè•ÊòØ‰∏Ä‰∏™Â∏∏Áî®ÁöÑÊñπÊ≥ïÔºåÊàë‰ª¨Â∞Ü‰∏æÂá∫‰∏Ä‰∫õsqlÁöÑÊü•ËØ¢Êù•ËøõË°åÂàÜÊûêÔºå‰ª•‰∏ãÁöÑ‰æãÂ≠êÈÉΩÊù•Ëá™‰∫éRefundË°®ÔºàËøôÂº†Ë°®‰∏éÁ¨¨‰∏ÄÁØáÂçöÊñá‰∏≠‰ΩøÁî®ÁöÑË°®Áõ∏ÂêåÔºåÂú∞ÂùÄÔºömysqlÁ¥¢ÂºïÂèäÊü•ËØ¢‰ºòÂåñÔºà‰∏ÄÔºâ‚Äî‚Äî‰ªéÊÖ¢Êü•ËØ¢ÂÆû‰æã‰∏≠ÂºÄÂßãÂàÜÊûêÔºâ explainÂæóÂà∞ÁöÑÁªìÊûúÂàÜÊûê: ËØ∑Áúã‰∏ãÂõæÁöÑ‰æãÂ≠êÔºö È¶ñÂÖàÊàë‰ª¨Êù•Ëß£Èáä‰∏ãexplainÁªìÊûúÁöÑÂêÑ‰∏™ÂàóÁöÑÂê´‰πâÔºö id:Ë°®Á§∫selectÂ≠êÂè•ÊâßË°åÁöÑidÔºåÂ¶ÇÊûúÊòØÂ≠êÊü•ËØ¢ÔºåidÁöÑÂ∫èÂè∑Â∞±‰ºöÈÄíÂ¢û‰∫ÜÔºåÂπ∂‰∏îidÂÄºË∂äÂ§ßÁöÑÂ≠êÂè•Ë∂äÂÖàË¢´ÊâßË°å select_type:Ë°®Á§∫selectËØ≠Âè•ÁöÑÁ±ªÂûãÔºåÊØîÂ¶ÇÔºöSIMPLEÔºàÁÆÄÂçïÊü•ËØ¢Ôºå‰∏çÂåÖÂê´Â≠êÊü•ËØ¢ÊàñËÄÖUNIONÔºâÔºõPRIMARY Êü•ËØ¢‰∏≠Ëã•ÂåÖÂê´‰ªª‰ΩïÂ§çÊùÇÁöÑÂ≠êÈÉ®ÂàÜÔºåÊúÄÂ§ñÂ±ÇÊü•ËØ¢ÂàôË¢´Ê†áËÆ∞‰∏∫PRIMARYÔºåÂÖ∑‰Ωì‰∏çÂ±ïÂºÄ‰∫ÜÔºåÂèØ‰ª•Ëá™Ë°åÊêúÁ¥¢ table:ÂΩìÂâçÊâßË°åÁöÑË°®Âêç typeÔºöÂΩìÂâçË°®ÂÜÖËÆøÈóÆÊñπÂºèÔºåËÆøÈóÆÊñπÂºè‰ªéÂ•ΩÂà∞ÂùèÊéíÂ∫è‰∏∫Ôºö system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; allsystemÊåáË°®Âè™Êúâ‰∏ÄË°åËÆ∞ÂΩïÔºõconstË°®Á§∫Êü•ËØ¢‰∫Ü‰∏ÄÊ¨°Â∞±ÊâæÂà∞ÁªìÊûúÔºõeq_refË°®Á§∫ÂîØ‰∏ÄÊÄßÁ¥¢ÂºïÊâ´ÊèèÔºåÂØπ‰∫éÊØè‰∏™Á¥¢ÂºïÈîÆÔºåË°®‰∏≠Âè™Êúâ‰∏ÄÊù°ËÆ∞ÂΩï‰∏é‰πãÂåπÈÖçÔºõrefË°®Á§∫ÈùûÂîØ‰∏ÄÁ¥¢ÂºïÊâ´ÊèèÔºõrange Ë°®Á§∫Âè™Ê£ÄÁ¥¢ÁªôÂÆöËåÉÂõ¥ÁöÑË°åÔºå‰ΩøÁî®‰∏Ä‰∏™Á¥¢ÂºïÊù•ÈÄâÊã©Ë°åÔºõindexË°®Á§∫Êü•ËØ¢Êâ´Êèè‰∫ÜÁ¥¢ÂºïÊ†ëÔºõallË°®Á§∫ÂÖ®Ë°®Êâ´Êèè possible_keys:ÂèØËÉΩ‰ΩøÁî®Âà∞ÁöÑÁ¥¢Âºï key:ÁªèËøá‰ºòÂåñÂô®ËØÑ‰º∞ÊúÄÁªà‰ΩøÁî®ÁöÑÁ¥¢Âºï key_length:‰ΩøÁî®Âà∞ÁöÑÁ¥¢ÂºïÈïøÂ∫¶ ref:ÂºïÁî®Âà∞ÁöÑ‰∏ä‰∏Ä‰∏™Ë°®ÁöÑÂàórows:Ë¶ÅÂæóÂà∞ÊúÄÁªàËÆ∞ÂΩïÁ¥¢Ë¶ÅÊâ´ÊèèÁªèËøáÁöÑËÆ∞ÂΩïÊï∞ÔºårowsÂÄºË∂äÂ∞èËØ¥ÊòéÊü•ËØ¢Ë∂äÈ´òÊïà Extra:È¢ùÂ§ñÁöÑ‰ø°ÊÅØËØ¥ÊòéÔºå‰∏ªË¶ÅÁöÑÁ±ªÂûãÊúâÔºöUsing filesortÔºöÊñá‰ª∂ÊéíÂ∫èÔºåËØ¥ÊòémysqlÊó†Ê≥ïÂà©Áî®Á¥¢ÂºïÂÆåÊàêÊéíÂ∫èUsing temporaryÔºö‰∏¥Êó∂Ë°®Ôºå ‰ΩøÁî®‰∫ÜÁî®‰∏¥Êó∂Ë°®‰øùÂ≠ò‰∏≠Èó¥ÁªìÊûúÔºåMySQLÂú®ÂØπÊü•ËØ¢ÁªìÊûúÊéíÂ∫èÊó∂‰ΩøÁî®‰∏¥Êó∂Ë°®ÔºåËøô‰∏™Êó∂ÂÄôÊïàÁéáÊòØÊûÅÂÖ∂‰Ωé‰∏ãÁöÑUsing indexÔºöË°®Á§∫Áõ∏Â∫îÁöÑselectÊìç‰Ωú‰∏≠‰ΩøÁî®‰∫ÜË¶ÜÁõñÁ¥¢ÂºïÔºàCovering IndexÔºâÔºåÈÅøÂÖçËÆøÈóÆ‰∫ÜÂõûË°®ËÆøÈóÆÊï∞ÊçÆUsing whereÔºö‰ΩøÁî®‰∫ÜwhereËøáÊª§Using join bufferÔºö‰ΩøÁî®‰∫ÜËøûÊé•ÁºìÂ≠òimpossible whereÔºöwhereÂ≠êÂè•ÁöÑÂÄºÊÄªÊòØfalseÔºå‰∏çËÉΩÁî®Êù•Ëé∑Âèñ‰ªª‰ΩïÂÖÉÁªÑUsing index conditionÔºöUsing index condition ‰ºöÂÖàÊù°‰ª∂ËøáÊª§Á¥¢ÂºïÔºåËøáÊª§ÂÆåÁ¥¢ÂºïÂêéÊâæÂà∞ÊâÄÊúâÁ¨¶ÂêàÁ¥¢ÂºïÊù°‰ª∂ÁöÑÊï∞ÊçÆË°åÔºåÈöèÂêéÁî® WHERE Â≠êÂè•‰∏≠ÁöÑÂÖ∂‰ªñÊù°‰ª∂ÂéªËøáÊª§Ëøô‰∫õÊï∞ÊçÆË°å ‚Ö¢. ÂÆû‰æãÂàÜÊûêËØ∑ÁúãÂ¶Ç‰∏ãÁöÑsqlÔºö1explain select* from Refund where sellerUserId=93106308 Âõ†‰∏∫Á¥¢ÂºïÊó†Ê≥ïË¶ÜÁõñÊü•ËØ¢ÊâÄÈúÄË¶ÅÁöÑÂÖ®ÈÉ®ÂàóÔºåÂõ†Ê≠§Extra‰∏≠ÊòæÁ§∫‚ÄúUsing index condition‚ÄùÔºö ÂÜçÁúãËøô‰∏™SQLÔºö1explain select status from Refund where status=700 order by created ËøôÈáåËøõË°å‰∫ÜÊñá‰ª∂ÊéíÂ∫èÔºö Ë¶ÜÁõñÁ¥¢ÂºïÊü•ËØ¢Ôºö1explain select sellerUserId, status, created from Refund RefundË°®‰∏≠Êúâ‰∏Ä‰∏™Â§öÂàóÁ¥¢ÂºïÔºöKEY idx_sellerUserId_created_status (sellerUserId,created,status)ÔºåÂ¶ÇÊûúÂè™ËÆøÈóÆsellerUserId, status, createdËøô‰∏âÂàóÔºåÊü•ËØ¢Â∞Ü‰ΩøÁî®‚ÄúË¶ÜÁõñÁ¥¢Âºï‚ÄùÔºöÂÖ∑‰ΩìÊâßË°åÁªìÊûúÂ¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåÂú®typeÂàó‰∏≠ÊòæÁ§∫‰∫Ü‚Äúindex‚ÄùÔºåËøôË°®Á§∫Ê≠§Ê¨°Êü•ËØ¢Â∞ÜÈÄöËøáÁ¥¢ÂºïÊù•ËÆøÈóÆÊï∞ÊçÆÔºõExtra‰∏≠ÁöÑ‚ÄúUsing index‚ÄùË°®Á§∫Ê≠§Ê¨°Êü•ËØ¢Â∞Ü‰ΩøÁî®‚ÄúÁ¥¢ÂºïË¶ÜÁõñ‚ÄùÊü•ËØ¢„ÄÇ ÊúÄÂêé‰∏Ä‰∏™sql‰æãÂ≠êÔºö1explain select status from Refund where sellerUserId=93106308 order by created ËøôÂè•sql‰∏≠ÁöÑExtra‰∏ç‰ªÖÂá∫Áé∞‰∫Ü‚ÄúUsing index‚ÄùËøòÂá∫Áé∞‰∫Ü‚ÄúUsing where‚ÄùÔºåËøôË°®Á§∫Á¥¢ÂºïË¢´Áî®Êù•ÊâßË°åÁ¥¢ÂºïÈîÆÂÄºÁöÑÊü•ÊâæÔºõÂ¶ÇÊûúÊ≤°ÊúâÂêåÊó∂Âá∫Áé∞‚ÄúUsing where‚ÄùÔºåË°®ÊòéÁ¥¢ÂºïÁî®Êù•ËØªÂèñÊï∞ÊçÆËÄåÈùûÊâßË°åÊü•ÊâæÂä®‰Ωú„ÄÇ ‚Ö£. Reference[1]. EXPLAINÁî®Ê≥ïÂíåÁªìÊûúÂàÜÊûêÔºöhttps://blog.csdn.net/why15732625998/article/details/80388236[2]. Schwartz B, Zaitsev P, Tkachenko V. High Performance MySQL: Optimization, Backups, and Replication[M]. O‚ÄôReilly Media, Inc. 2012.]]></content>
      <tags>
        <tag>sql</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
        <tag>Á¥¢Âºï</tag>
        <tag>‰ºòÂåñ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê≠£ÂºèÂëäÂà´CSDN]]></title>
    <url>%2F2018%2F08%2F08%2F20180808-sayByeToCSDN%2F</url>
    <content type="text"><![CDATA[Áªà‰∫éÊúâ‰∫ÜËá™Â∑±ÁöÑÂçöÂÆ¢CSDNÊãúÊãúüëãÔΩûÊó†Êï∞Ê¨°Ë¢´csdnË†¢Âì≠ÔºÅ‰∏ÄÊòØÊÑöË†¢ÁöÑ‰∫∫Â∑•ÂÆ°Ê†∏ÊñπÂºèÔºõ‰∫åÊòØÊçâÊÄ•ÁöÑappÂêéÂè∞ÔºåËÄÅÂ•îÊ∫É„ÄÇËÄÅÂÆûËØ¥Ôºå‰πãÂâç12306ÊòØÊàëËßÅËøáÁöÑÊúÄÂÇªÊúÄË†¢ÁöÑappÔºÅÂ•Ω‰∫ÜÔºåcsdnÂà∑Êñ∞ÊàëËÆ∞ÂΩï‰∫Ü„ÄÇÁé∞Âú®ÊàëÊääËøô‰∏™titleÈ¢ÅÁªôÊÇ®ÔºÅËØ∑ÊÇ®Âä°ÂøÖÊé•ÂèóÔºÅBTWÔºåÁé∞Âú®Áªà‰∫é‰πüÊê≠Âª∫‰∫ÜËá™Â∑±ÁöÑÂçöÂÆ¢ÔΩû blog4olive.topÂüüÂêç‰∏çÁÆóÂ•ΩÂê¨ÔºàÁ©∑Âõ∞ÁöÑÊàëËøôËæàÂ≠êÈÉΩ‰π∞‰∏çËµ∑Â•ΩÂê¨ÁöÑÂüüÂêçÔºÅÂèØ‰ª•ËÄÉËôëÁªôÊàë‰ºóÁ≠π„ÄÇÂàöÂ•ΩÊ∑ªÂä†‰∫ÜÊâìËµèÂäüËÉΩÔºåÊñáÁ´†Êú´Â∞æÂç≥ÂèØÁúãÂà∞ÔºÅÔºâÔºå‰ΩÜËÉúÂú®ÁÆÄÂçïÊòé‰∫ÜÂØπÂêßÔºü ÂÖ≥‰∫éÂçöÂÆ¢Êõ¥Êñ∞ Â¢ûÂä†‰∫ÜÊñáÁ´†pv ÂçöÂÆ¢pvÁöÑÊòæÁ§∫ È°µËÑöiconÁ≠âÁöÑ‰ºòÂåñ ÊñáÁ´†ÁªìÊûÑÊòæÁ§∫ ÊñáÁ´†ÊêúÁ¥¢ÂäüËÉΩ ÊâìËµè TODO: ËØÑËÆ∫ÂäüËÉΩ ÂàÜ‰∫´ ‰ª£Á†ÅÈ´ò‰∫ÆÁ≠âÊ†ºÂºè‰ºòÂåñ Êõ¥ÁæéËßÇÊõ¥‰ºòÈõÖ ‰πãÂêécsdnÁöÑÂçöÂÆ¢ÈÉΩË¶ÅËøÅÁßªËøáÊù•ÔºåÂ∑•Á®ãÈáèÂ∑®Â§ßÔºåÊÉ≥Êâì‰∫∫ ÈÇ£‰πàÁªßÁª≠Âä†Ê≤πÂêß! ÈÄÅ‰∏ä‰∏ÄÂº†ÁæéÁÖßÔºåÊîπÂ§©ÔºàÊúàÔºüÂπ¥ÔºüÔºâÁªßÁª≠Âá∫ÂéªÊóÖË°å]]></content>
      <tags>
        <tag>Èöè‰æøÂÜôÂÜô</tag>
        <tag>ÂêêÊßΩ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysqlÁ¥¢ÂºïÂèäÊü•ËØ¢‰ºòÂåñÔºà‰∏ÄÔºâ‚Äî‚Äî‰ªéÊÖ¢Êü•ËØ¢ÂÆû‰æã‰∏≠ÂºÄÂßãÂàÜÊûê]]></title>
    <url>%2F2018%2F08%2F04%2F20180804-sqlIndexAndQueryOptimize-1%2F</url>
    <content type="text"><![CDATA[ÂÆòÊñπÂêêÊßΩ‰∏∫‰ªÄ‰πàÂÜôËøô‰∏™ÂÜôËøô‰∏™ÂçöÂÆ¢‰πüÁÆóÊòØÈò¥Â∑ÆÈò≥Èîô„ÄÇ‰∏äÊ¨°ÂÅö‰∫Ü‰∏™ÈúÄÊ±ÇÔºöÈÄÄÊ¨æÂàóË°®ÂØºÂá∫ÔºàÂèØ‰ª•ÁøªÁøª‰πãÂâçÁöÑÂçöÂÆ¢ÔºåÊúâÂÜôÔºâ„ÄÇËôΩÁÑ∂‰∫ãÊÉÖËøá‰∫ÜÈÇ£‰πà‰πÖÔºåÁé∞Âú®ÊàëËøòÊòØÊÉ≥Ë¶ÅÂêêÊßΩ‰∏ãÔºåËøô‰∏™ÈúÄÊ±ÇÊòØÁúüÁöÑÊúâÂæàÂ§öÂùëÔºå‰ΩÜËØùËØ¥ÂõûÊù•ÔºåÂÅöÈöæ‰∫ãÊâç‰ºöÊúâÊâÄÂæóÔºåË∏©ÁöÑÂùëË∂äÂ§öÔºåÈÇ£ÊàêÈïøÂ∞±Ë∂äÂ§öÔºàËØ∑ËÑëË°•Ëôê‰∏ªÊñáÔºâ„ÄÇ ÂÖ≥‰∫éËøô‰∏™Á≥ªÂàóÁöÑÂçöÂÆ¢Ëøô‰∏™ÂçöÂÆ¢Â§ßÊ¶ÇÊòØËøô‰πàÂàÜÂ∏ÉÁöÑÔºöÁ¨¨‰∏ÄÁØáÂ∞±Ê†πÊçÆÂÆûÈôÖÂú∫ÊôØÊù•ÂàÜÊûê‰∏ãÁ¥¢ÂºïÂèäÊü•ËØ¢‰∏äÁöÑ‰ºòÂåñÔºõÁ¨¨‰∫åÁØáÂíåÁ¨¨‰∏âÁØáÔºàÂ¶ÇÊûúÊàëËøòËÉΩÂÜôÂæóÂá∫Êù•Á¨¨‰∏âÁØáÁöÑËØùüòÖÔºâÊù•Á≥ªÁªüÂú∞Êï¥ÁêÜ‰∏ãmysqlÁöÑÁ¥¢ÂºïÂèäÊü•ËØ¢ÁöÑ‰ºòÂåñ„ÄÇ ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî ‰ª•‰∏ã‰∏∫Ê≠£Êñá ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚ÄîÈóÆÈ¢òÊòØËøôÊ†∑ÁöÑÔºåÊúâ‰∏ÄÊ¨°‰∏Ä‰∏™ÂÆ¢ÊúçÂêåÂ≠¶ÊÄ•ÊÄ•ÂøôÂøôÊù•ÊâæÊàëÔºåËØ¥ÂØºÂá∫Âá†Êù°ËÆ∞ÂΩïÈÉΩÂ§±Ë¥•‰∫ÜÔºåÊü•Áúã‰∫ÜÈîôËØØÊó•ÂøóÊòæÁ§∫ÈîôËØØÂ¶Ç‰∏ãÔºö Â•Ω‰∫ÜÔºå‰∏çË¶ÅÁõØÁùÄ‰∫∫ÂÆ∂ÁöÑÁ∫¢Ëâ≤Ê°ÜÊ°ÜÁúã‰∫ÜÔºåÈáçÁÇπ‰∏çÊòØÈÇ£Èáå„ÄÇ ÈáçÁÇπÊòØÂá∫Áé∞‰∫ÜÊÖ¢Êü•ËØ¢Êó•ÂøóÔºåÊàëÁü•ÈÅìÁúãÂõæËÇØÂÆöÁúã‰∏çÂá∫Êù•ËøôÊù°sqlÊòØÂï•Ôºå‰∫éÊòØÊàëË¥¥ÂøÉÁöÑË¥¥‰∫ÜÂá∫Êù•Ôºö 1234567select* ÔºàËøôÈáåÂÖ∂ÂÆû‰∏çÊòØËøô‰πàÊö¥ÂäõÂú∞ÊãøÂÖ®ÂàóÊï∞ÊçÆÔºå‰∏∫‰∫ÜÊñπ‰æøÔºåÂ∞±*Ë°®Á§∫‰∫ÜÔºâfrom RefundFORCE INDEX (idx_sellerUserId_created_status)WHERE sellerUserId = 40955202 AND status IN (800, 900) AND created &gt;= 946656000 AND created &lt; 2051193600 ORDER BY created desc LIMIT 0, 50 È¶ñÂÖàÊù•ÂàÜÊûê‰∏ãËøôÊù°sqlË¶ÅÂÅöÂï•ÔºåÂÖ∂ÂÆûÂ∞±ÊòØÂú®RefundÔºàÈÄÄÊ¨æË°®ÔºâËøô‰∏™Ë°®‰∏≠Êü•ËØ¢ÊâÄÊúâsellerUserId‰∏∫40955202ÔºåÂπ∂‰∏îÁä∂ÊÄÅÂú®800Âèä900Ôºà800Ôºå900Á≠âË°®Á§∫ÈÄÄÊ¨æÂ§Ñ‰∫éÁöÑÁä∂ÊÄÅÔºåÂ¶ÇÈÄÄÊ¨æÁî≥ËØ∑ÔºåÈÄÄÊ¨æÂÆåÊàêÁ≠âÔºâ‰πãÈó¥ÁöÑÔºåÂπ∂‰∏îÂàõÂª∫Êó∂Èó¥Â§ß‰∫éÁ≠â‰∫é946656000‰∏îÂ∞è‰∫é2051193600ÔºàËøôÊòØ‰∏§‰∏™Êó∂Èó¥Êà≥ÔºâÁöÑÊâÄÊúâËÆ∞ÂΩïÔºåÂπ∂‰∏îÂ∞ÜÊâÄÊúâËøô‰∫õËÆ∞ÂΩïÊ†πÊçÆcreatedÔºàÂàõÂª∫Êó∂Èó¥ÔºâËøõË°åÈÄÜÂ∫èÊéíÂ∫èÂêéÂèñÂºÄÂ§¥50Êù°„ÄÇÊ≥®ÊÑèÂà∞Ëøô‰∏™sqlÊúâ‰∏Ä‰∏™ FORCE INDEX (idx_sellerUserId_created_status)ÔºåËøô‰∏™ÊÑèÊÄùÊòØËÆ©sqlÂº∫Âà∂Ëµ∞idx_sellerUserId_created_statusËøô‰∏™Á¥¢ÂºïÔºåËá≥‰∫é‰∏∫‰ªÄ‰πàÊúâÊó∂ÂÄôÈúÄË¶ÅÂº∫Ë°åËµ∞Á¥¢ÂºïÔºåËøô‰∏™Ê∂âÂèäÂà∞mysqlÁöÑÊü•ËØ¢‰ºòÂåñÔºå‰πãÂêé‰ºöËÆ≤Âà∞ Áúã‰∫Ü‰∏äÈù¢ËøôÊù°sqlÔºåÊúâÊ≤°ÊúâÂèëÁé∞‰ªÄ‰πàÈóÆÈ¢òÔºüÂèØËÉΩÊàë‰ª¨‰ºöËßâÂæóÊúâÈóÆÈ¢òÔºå‰ΩÜÊòØÂπ∂‰∏çËÉΩÂæàÊ∏ÖÊô∞Âú∞ËØ¥Âá∫Êù•„ÄÇÈÇ£‰πàÔºåÈ¶ñÂÖàÊù•Áúã‰∏ãmysqlÁöÑÊâßË°åËÆ°ÂàíÂêßÔºÅ ÁúãÂá∫ÈóÆÈ¢òÊù•‰∫Ü‰πàÔºüÂú®ÊàëÁúãÊù•ÔºåËøôÊù°sqlËá≥Â∞ëÂ≠òÂú®3Êù°ÈóÆÈ¢òÔºÅ‰ª•‰∏ã‰∏ÄÊù°‰∏ÄÊù°Êù•ÂàÜÊûêÔºö ceratedÁöÑÊó∂Èó¥Êü•ËØ¢ËåÉÂõ¥ËøáÂ§ßÔºå946656000ËΩ¨Âåñ‰∏∫Âåó‰∫¨Êó∂Èó¥ÊòØ2000/1/1 0:0:0Ôºå2051193600ËΩ¨Âåñ‰∏∫Âåó‰∫¨Êó∂Èó¥ÊòØ2035/1/1 0:0:0„ÄÇÈÇ£‰πàËøô‰∏™Êó∂Èó¥ÊÆµÊÆµÂê´‰πâÊòØ‰ªÄ‰πàÂë¢ÔºüÂú®ÊàëÂ∫îÁî®ÁöÑÂÖ∑‰ΩìÊâßË°å‰∏≠ÔºåÂΩìÁî®Êà∑Âú®ÂØºÂá∫ÈÄÄÊ¨æÂàóË°®Êó∂Ê≤°ÊúâÈÄâÊã©ÂØºÂá∫ÁöÑÊó∂Èó¥ÊÆµÊó∂ÔºåÂ∞±‰ºöÁªôÂÆö‰∏Ä‰∏™ÈªòËÆ§ÁöÑÊêúÁ¥¢Êó∂Èó¥ÊÆµÔºåËÄåÊÅ∞Â∑ßÊàëËÆæÁΩÆ‰∫ÜÊØîËæÉÂ§ßÁöÑËµ∑Ê≠¢Êó∂Èó¥„ÄÇËøô‰∏™Êó∂Èó¥ÊÆµÊú¨Êù•ÊòØ‰∏çÈúÄË¶ÅËøô‰πàÂ§ßÁöÑÔºåËøô‰∏™Êó∂Èó¥ÊÆµÂü∫Êú¨Â∞ÜËøô‰∏™Áî®Êà∑ÊâÄÊúâÁöÑÈÄÄÊ¨æËÆ∞ÂΩïÈÉΩÂåÖÂê´‰∫Ü„ÄÇÊàë‰ª¨Êù•Áúã‰∏ãËøô‰∏™Áî®Êà∑Á©∂Á´üÊúâÂ§öÂ∞ëÊù°ÈÄÄÊ¨æËÆ∞ÂΩïÔºöÂ•ΩÂÆ∂‰ºôÔºå1000Â§öwÊù°ËÆ∞ÂΩï„ÄÇ„ÄÇÈÇ£‰πàÊúâ‰∫∫‰ºöËØ¥ÔºåÊó∂Èó¥ÊÆµÂ§ß‰πüÊ≤°ÂÖ≥Á≥ªÔºå‰∏çÊòØËøòÊúâÂÖ∂‰ªñÁ¥¢ÂºïÈ°πÂèØ‰ª•ËøõË°åÁ∫¶ÊùüÂêóÔºüÈÇ£‰πàÊàë‰ª¨Êù•ÁúãÁúãÁ¨¨‰∫å‰∏™ÈóÆÈ¢ò Á¥¢ÂºïÁúüÁöÑÁî®‰∏ä‰∫Ü‰πàÔºü‰∏∫‰∫ÜÈò≤Ê≠¢mysql‰ºòÂåñÂô®Âá∫Áé∞Áü≥ÂøóË°å‰∏∫ÔºåËøôÊù°sqlÁâπÊÑèÂëäËØâmysqlÔºöÊÇ®Âï•‰πü‰∏çÁî®ÊÉ≥ÔºÅÂ∞±Áî®Ëøô‰∏™Á¥¢ÂºïÔºÅÈÇ£‰πàÊàë‰ª¨Êù•Áúã‰∏ãËøô‰∏™Á¥¢ÂºïÔºöidx_sellerUserId_created_status„ÄÇÂæàÊòéÊòæÔºåËøôÊòØ‰∏Ä‰∏™Â§öÂàóÁ¥¢ÂºïÔºåÊòØ‰∏Ä‰∏™Áî±sellerUserId„ÄÅcreated„ÄÅstatus‰∏âÂàóÁªÑÊàêÁöÑ‰∏Ä‰∏™ËÅîÂêàÁ¥¢Âºï„ÄÇÂÜçÊù•Áúã‰∏ãËøôÊù°sqlÁöÑwhereÊù°‰ª∂ÔºöWHERE sellerUserId = 40955202 and status IN(800, 900) and created &gt;= 946656000 AND created &lt; 2051193600 order by created„ÄÇ‰πç‰∏ÄÁúãÔºåÂ•ΩÂÉèÁ¥¢ÂºïÊ≤°Áî®‰∏äÂïäÔºüÁ¥¢ÂºïÁöÑÊéíÂ∫èÊòØsellerUserId„ÄÅcreated„ÄÅstatusÔºåËÄåwhereÊù°‰ª∂ÁöÑÈ°∫Â∫èÊòØsellerUserId„ÄÅstatus„ÄÅcreated„ÄÇÈÇ£Á¥¢ÂºïÊòØ‰∏çÊòØÊ≤°Áî®‰∫ÜÔºüÂΩìÁÑ∂‰∏çÊòØÁöÑÔºÅmysqlÂ¶ÇÊûúËøûËøôÁÇπ‰ºòÂåñÈÉΩÊ≤°ÊúâËÄÉËôëÔºåÈÇ£ÂíåÂí∏È±ºÊúâ‰ªÄ‰πàÂå∫Âà´ÔºüÔºüÂú®ËøôÈáåÔºåmysql‰ºöÂ∞ÜwhereÊù°‰ª∂ÂÅö‰∏Ä‰∏™‰ºòÂåñÔºåwhereÊù°‰ª∂ÂÜÖÁöÑÈ°∫Â∫èÊòØ‰∏çÂΩ±ÂìçÊ≠§Á¥¢ÂºïÁöÑ‰ΩøÁî®ÁöÑ„ÄÇÈÇ£‰πàËøô‰∏™Á¥¢ÂºïÁúüÁöÑÁîüÊïà‰∫Ü‰πàÔºü‰∫ãÂÆûÊòØÂπ∂Ê≤°Êúâ„ÄÇÊàë‰ª¨Êù•ÂàÜÊûê‰∏ãËøô‰∏™Á¥¢ÂºïÔºåÊ≥®ÊÑèÁúãËøô‰∏™Êù°‰ª∂Ôºöcreated &gt;= 946656000 AND created &lt; 2051193600ÔºåÂæàÊòéÊòæËøôÊòØ‰∏Ä‰∏™ËåÉÂõ¥Êü•ËØ¢ÔºåËÄåÂú®Â§öÂàóÁ¥¢ÂºïÁöÑ‰ΩøÁî®‰∏≠ÔºåÂ¶ÇÊûúÁ¢∞Âà∞‰∫ÜËåÉÂõ¥Êù°‰ª∂ÔºåÈÇ£‰πàÂ≠òÂÇ®ÂºïÊìéÊòØ‰∏ç‰ºö‰ΩøÁî®ËåÉÂõ¥Êù°‰ª∂Âè≥ËæπÁöÑÂàóÁöÑÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÂí±‰ª¨ËøôÊù°sqlÔºåÁ¥¢ÂºïÂà∞‰∫Üidx_sellerUserId_createdÂ∞±Âà∞Â§¥‰∫ÜÔºå‰∏ç‰ºöÂÜç‰ΩøÁî®statusÂÅöÁ¥¢Âºï„ÄÇÂº∫Âà∂Ëµ∞ÁöÑËøô‰∏™Á¥¢ÂºïÔºåÂ§±Êïà‰∫ÜÔºÅÂõ†Ê≠§ËøôÊù°Êü•ËØ¢Âè™Áî®Âà∞ÈÉ®ÂàÜÁöÑÁ¥¢Âºï Êü•ËØ¢ÁúüÁöÑÊúâÂøÖË¶ÅÈÇ£‰πàÂÜô‰πàÔºüÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞whereÊù°‰ª∂‰∏≠ÈôêÂà∂‰∫ÜcreatedÂ≠óÊÆµÁöÑÊü•ËØ¢ËåÉÂõ¥ÔºåËÄåÂú®ÊéíÂ∫èÊó∂ÂèàÈúÄË¶ÅÊ†πÊçÆcreatedÂ≠óÊÆµËøõË°åÈÄÜÂ∫èÊéíÂ∫èÔºå‰πãÂêéÂèàÂè™Âèñ‰∫ÜÊúÄÁªàÁªìÊûúÁöÑÂºÄÂ§¥50Ë°å„ÄÇÂ∞ΩÁÆ°Êàë‰ª¨ÂæàÁêÜÊÉ≥ÂåñÂú∞ËÆæÊÉ≥mysqlÂè™‰ºöËøîÂõûÊàë‰ª¨ÈúÄË¶ÅÁöÑÊï∞ÊçÆÔºåÊØîÂ¶ÇÂú®ËøôÊù°sql‰∏≠Êàë‰ª¨ÁúüÁöÑÂæàÂ∏åÊúõmysqlÂèØ‰ª•Âè™Êâ´Êèè50Ë°åÂ∞±ÊêúÁ¥¢Êàë‰ª¨ÈúÄË¶ÅÁöÑÈÇ£50Êù°Êï∞ÊçÆ„ÄÇÁÑ∂ËÄåÔºåÂú®ÁúüÊ≠£ÁöÑÊü•ËØ¢‰∏≠Êàë‰ª¨ÊÉä‰∫∫Âú∞ÂèëÁé∞mysqlËØªÂèñ‰∫ÜË∂ÖËøáÂçÉ‰∏áÊù°ÁöÑÊï∞ÊçÆÔºÅ‰∏ÄÈÉ®ÂàÜÁöÑÂéüÂõ†Âú®‰∫éÊü•ËØ¢ËøáÁ®ã‰∏≠‰ΩøÁî®‰∫Ü‰∏çÂ§™ÂêàÈÄÇÁöÑÁ¥¢ÂºïÔºåÂè¶‰∏ÄÊñπÈù¢Âú®‰∫éÊàë‰ª¨ÁöÑÊü•ËØ¢Â§™Á¥ØËµò‰∫ÜÔºåË¶ÅÊÉ≥Êàë‰ª¨ÁöÑÊü•ËØ¢‰∏çÈÇ£‰πàÁ¥ØËµòÔºåÈ¶ñÂÖàË¶ÅÊêûÊ∏ÖÊ•öÊàë‰ª¨Ë¶ÅÊü•ËØ¢‰ªÄ‰πà„ÄÇÂ¶Ç‰∏äÂ∞±ÂàÜÊûêËøáÔºåÊàë‰ª¨ÈúÄË¶ÅÁöÑÂè™ÊòØËØ•Áî®Êà∑ÂàõÂª∫ÁöÑ„ÄÅÂ§Ñ‰∫éÊüê‰∫õÁä∂ÊÄÅÁöÑ„ÄÅÊúÄÊñ∞ÁöÑ50Êù°ËÆ∞ÂΩïÔºåÈÇ£‰πàÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãcreatedÂ≠óÊÆµÁöÑËåÉÂõ¥ËøòÊúâ‰ªÄ‰πàÊÑè‰πâÔºü ÈÇ£‰πàÈíàÂØπ‰∏äÈù¢Âá†‰∏™ÈóÆÈ¢òÔºåÊé•‰∏ãÊù•Êàë‰ª¨ÊÉ≥ÂäûÊ≥ïÊù•‰ºòÂåñ‰∏ãËøôÊù°Êü•ËØ¢ÂêßÔºÅ‰ª•‰∏äÁöÑÊà™ÂõæÂíåÈóÆÈ¢òÈÉΩÊù•Ê∫ê‰∫éÁ∫ø‰∏äÔºåÂõ†‰∏∫Êé•‰∏ãÊù•ÁöÑÊìç‰ΩúÂèØËÉΩ‰ºöÊ∂âÂèäÂà∞Ë°®ÁªìÊûÑÔºåÊâÄ‰ª•Êé•‰∏ãÊù•‰ΩøÁî®‰∏Ä‰∏™Á∫ø‰∏ãÁöÑdbÊù•ËøõË°åÊ®°Êãü È¶ñÂÖàÁúã‰∏ãË°®ÁöÑÁªìÊûÑ ÁÑ∂ÂêéÊàë‰ª¨Êù•Êü•ËØ¢‰∏ãÈÄÄÊ¨æÊï∞ÈáèÊúÄÂ§öÁöÑÁî®Êà∑ Êàë‰ª¨ÂèëÁé∞id‰∏∫93106308ÁöÑÁî®Êà∑ÈÄÄÊ¨æÊï∞ÈáèÊúÄÂ§öÔºåÂ§ßÊ¶ÇÊúâ5wÂ§öË°åÔºåÈÇ£‰πàÂ∞±Áî®‰ªñÊù•ÂÅöÊ®°ÊãüÂêßÔºÅ È¶ñÂÖàÊù•Ê®°Êãü‰∏ãÊúÄÂàùÁöÑsqlËØ≠Âè• 12345678explain select* FROM Refund FORCE INDEX (idx_sellerUserId_created_status) WHERE sellerUserId=93106308 and status IN (700, 900, 1000) AND created &gt;= 1278691200 AND created &lt; 1531152000 ORDER BY created desc LIMIT 0, 10 Â¶Ç‰∏äÂõæÊâÄÁ§∫ÁöÑÊâßË°åÁªìÊûúÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåmysqlÁ°ÆÂÆû‰ΩøÁî®‰∫Üidx_sellerUserId_created_statusËøô‰∏™Á¥¢ÂºïÔºàËøôÂÖ∂ÂÆûÊòØÂ∫üËØùÔºå‰Ω†ÈÉΩÂº∫Âà∂‰∫∫ÂÆ∂Ëµ∞‰∫ÜÔºåÔºåÔºâÔºåÁÑ∂ÂêéÁúãrowsËøô‰∏ÄË°åÔºö64867ÔºÅÂ≠òÂÇ®ÂºïÊìéÊâ´ÊèèÊù•6wÂ§öË°åÊâçÂæóÂà∞Êàë‰ª¨ÈúÄË¶ÅÁöÑÊï∞ÊçÆÔºÅÂèØ‰ª•ÁúãÂà∞Âú®ExtraËøô‰∏ÄÂàó‰∏≠ÊòæÁ§∫ÁöÑÊòØÔºöUsing index conditionÔºåËøôË°®Á§∫Êü•ËØ¢ÈÉ®ÂàÜ‰ΩøÁî®‰∫ÜÁ¥¢ÂºïÔºåÂØπ‰∫é‰∏çÂú®Á¥¢Âºï‰∏≠ÁöÑÂàóÈúÄË¶ÅÂõûË°®Êü•ËØ¢Êï∞ÊçÆÔºåËøô‰πüÂ¶ÇÊàë‰ª¨È¢ÑÊÉ≥ÁöÑÈÇ£Ê†∑ ÈÇ£‰πàÊàë‰ª¨Êù•ËØïËØïÂ≠òÂÇ®ÂºïÊìéÁöÑËá™Âä®‰ºòÂåñÂêßÔºö ÂìàÂìàÔºåÂ≠òÂÇ®ÂºïÊìéÁöÑÊü•ËØ¢‰ºòÂåñÂÖ∂ÂÆûÂπ∂Ê≤°ÊúâÊÉ≥Ë±°‰∏≠ÁöÑÈÇ£‰πàÂ•ΩÔºà‰ΩÜ‰πüÊ≤°ÈÇ£‰πàÂ∑ÆÔºâÔºåÂéªÈô§‰∫ÜÂº∫Âà∂Á¥¢ÂºïÂêéÂ≠òÂÇ®ÂºïÊìéËá™Â∑±ÊâæÂà∞‰∫Ü‰∏Ä‰∏™ÂÆÉËÆ§‰∏∫ÁöÑÊúÄ‰ºòÁöÑÁ¥¢ÂºïÔºöidx_createdÔºåÂèØ‰ª•ÁúãÂà∞ExtraËøô‰∏ÄÂàó‰∏≠ÊòæÁ§∫ÁöÑÊòØÔºöUsing whereÔºåËøôË°®Á§∫Êü•ËØ¢ÈúÄË¶ÅÂõûË°®ÊçûÊï∞ÊçÆ‰ª•ÂêéÂÜç‰ΩøÁî®whereÊù°‰ª∂Êù•ËøõË°åËøáÊª§„ÄÇÈÇ£‰πàÂíå‰∏äÈù¢ÁöÑÊÉÖÂÜµÂÅöÂØπÊØîÔºåÂú®ÊÄßËÉΩ‰∏äÂÖ∂ÂÆûÊòØÊØ´Êó†Â∑ÆÂà´„ÄÇ ÈÇ£Êàë‰ª¨Âú®Á¥¢Âºï‰∏äÊù•‰ºòÂåñ‰∏ãÂêßÔºå‰∏∫‰∫ÜÈÅøÂÖçÈÅáÂà∞ËåÉÂõ¥Êü•ËØ¢ËÄå‰ΩøÂè≥ËæπÁ¥¢ÂºïÂàóÂ§±ÊïàÔºåÊàë‰ª¨Êù•Â∞Üidx_sellerUserId_created_statusÁ¥¢Âºï‰øÆÊîπ‰∏∫idx_sellerUserId_status_createdÔºåÂπ∂‰∏îËÆ©Â≠òÂÇ®ÂºïÊìéÂº∫Âà∂Ëµ∞Ëøô‰∏™Á¥¢ÂºïÔºö ÂèëÁé∞ÂèòÂåñ‰∫Ü‰πàÔºüÊü•ËØ¢Êâ´ÊèèÁöÑË°åÊï∞Â∞ë‰∫ÜÂæàÂ§öÔºÅ ÈÇ£Êé•‰∏ãÊù•ÂÜç‰ºòÂåñ‰∏ãÊü•ËØ¢ËØ≠Âè•Ôºö ÂèØ‰ª•ÁúãÂà∞ÔºåÂõ†‰∏∫‰ºòÂåñ‰∫ÜÊü•ËØ¢ËØ≠Âè•ÔºåÊ†πÊçÆcreatedËøõË°åÈÄÜÂ∫èÊéíÂ∫èÔºåÂØºËá¥ÊúÄÂêéÊâ´ÊèèÁöÑË°åÊï∞Â§ß‰∏∫ÂáèÂ∞ëÔºÅ Âú®ËøôÈáåÔºåËøôÊù°Êü•ËØ¢ÁöÑ‰ºòÂåñÂπ∂‰∏çÊòØÂú®‰ªª‰ΩïÂú∫ÊôØ‰∏ãÈÉΩÊòØËÉΩ‰øùËØÅÊúâÂæàÈ´òÁöÑÊü•ËØ¢ÊÄßËÉΩÁöÑ„ÄÇÊàë‰ª¨Áü•ÈÅìÁ¥¢ÂºïÂú®db‰∏≠Áª¥Êä§‰∫Ü‰∏Ä‰∏™b+tree ÁªìÊûÑÔºàinnodbÂºïÊìéÈªòËÆ§ÁªìÊûÑÔºâ„ÄÇidx_createdÁ¥¢ÂºïÂ∞ÜÊâÄÊúâÁöÑÊï∞ÊçÆÊ†πÊçÆcreatedÊù•Âª∫Á´ã‰∫Ü‰∏Ä‰∏™b+treeÔºåÂΩìÊàë‰ª¨Ë¶ÅÊü•ËØ¢ÁöÑÁî®Êà∑Êï∞ÊçÆÊÅ∞Â•ΩÂú®b+treeÁöÑÂêéÊñπÁöÑÊó∂ÂÄôÔºåÊü•ËØ¢‰πüÊòØÈúÄË¶ÅÊâ´Êèè‰∏çÂ∞ëË°åÁöÑÔºö ÊâÄ‰ª•‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆÁªìÊûÑÈúÄË¶ÅÂÖ∑‰ΩìÁöÑÂàÜÊûêÔºåÂ¶ÇÊûúÊ≤°ÊúâÂØπË°®ÁªìÊûÑ‰ª•ÂèäÊï∞ÊçÆÁªìÊûÑÊúâËæÉÊ∏ÖÊô∞ÁöÑËÆ§ËØÜÔºåÊàëËÆ§‰∏∫ËøôÁßçÊü•ËØ¢‰ºòÂåñÊòØ‰∏çÂ§™Ë°åÁöÑÔºåÊúâÊó∂ÂÄôÁîöËá≥‰ºöËµ∑Âà∞ÂèçÈù¢ÊïàÊûú„ÄÇ ÊâÄ‰ª•ÁªºÂêàËÄÉËôëÔºåÊàëËøòÊòØÂª∫ËÆÆ‰øÆÊîπ‰∏ãÁ¥¢ÂºïÁªìÊûÑÂç≥ÂèØÔºåËá≥‰∫é‰∏∫‰ªÄ‰πà‰∏çÊòØÁõ¥Êé•Â¢ûÂä†‰∏Ä‰∏™Á¥¢ÂºïÔºåËøôÊòØ‰∏∫‰∫ÜÂáèÂ∞èÂ≠òÂÇ®ÂºïÊìéÁöÑÂéãÂäõÔºåËøáÂ§öÁöÑÂÜó‰ΩôÁ¥¢Âºï‰πüÁªôÁª¥Êä§Â∏¶Êù•Ë¥üÊãÖ Êé•‰∏ãÊù•ÁöÑÂçöÂÆ¢‰ºöÁ≥ªÁªüÂú∞ËÆ≤Ëø∞‰∏ãmysqlÁöÑÁ¥¢ÂºïÂèäÊü•ËØ¢‰ºòÂåñ ÂØπ‰∏äËø∞ÈóÆÈ¢òÊúâÈóÆÈ¢òÊàñËÄÖÊÉ≥‰∏ÄËµ∑ËÆ®ËÆ∫ÁöÑÊúãÂèãÂèØ‰ª•ÈöèÊó∂ËÅîÁ≥ªÔΩû]]></content>
      <tags>
        <tag>sql</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
        <tag>Á¥¢Âºï</tag>
        <tag>‰ºòÂåñ</tag>
      </tags>
  </entry>
</search>
